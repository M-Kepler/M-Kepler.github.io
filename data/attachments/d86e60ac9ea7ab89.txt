INFO     mypy.lib.playwright.publish_config:publish_config.py:122 🟢 -----> 配置如下 <-----
INFO     mypy.apps.ppt2douyin.main:log.py:192 🟢 ========================================
INFO     mypy.apps.ppt2douyin.main:main.py:117 🟢 正在把当前目录下的 PPT 转成 video
INFO     mypy.apps.ppt2douyin.main:log.py:192 🟢 ========================================
INFO     mypy.apps.ppt2douyin.ppt_transfer:ppt_transfer.py:166 🟢 开始把《/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/消化内科护士长竞聘.pptx》转换成 video
INFO     mypy.apps.ppt2douyin.ppt_transfer:ppt_transfer.py:100 🟢 去除 《/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/消化内科护士长竞聘.pptx》 中的敏感信息
INFO     mypy.apps.ppt2douyin.ppt_transfer:ppt_transfer.py:49 🟢 PPT 转换成视频，并生成一张拼图作为封面
DEBUG    mypy.lib.ppt.ppt_handler:ppt_handler.py:25 🔵 把 PPT 转成 PDF
DEBUG    mypy.lib.libreoffice.libreoffice_helper:libreoffice_helper.py:75 🔵 通过 libreoffice 把 PPT 转成 PDF
DEBUG    /home/runner/work/github-runner/github-runner/mypy/utils/tools.py:tools.py:245 🔵 正在执行命令: ['soffice', '--headless', '--convert-to', 'pdf', '--outdir', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/消化内科护士长竞聘.pptx']
DEBUG    mypy.lib.pdf.pdf_handler:pdf_handler.py:41 🔵 通过 pdf2image 库转成图片，输出到: /tmp/tmpngkk30y6
DEBUG    mypy.lib.image.image2video_helper:image2video_helper.py:100 🔵 把 /tmp/tmpngkk30y6 目录下的图片合成视频，输出到: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video.mp4
DEBUG    mypy.lib.image.image2video_helper:image2video_helper.py:109 🔵 正在把图片序列转换成视频，输出到: /tmp/tmpog0_iooh
INFO     mypy.lib.image.image2video_helper:image2video_helper.py:128 🟢 文件夹 /tmp/tmpngkk30y6 下的图片成功转成视频： /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video.mp4
INFO     mypy.apps.ppt2douyin.ppt_transfer:ppt_transfer.py:183 🟢 转换完成，结果输出在 /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out 目录下
INFO     mypy.apps.ppt2douyin.main:log.py:192 🟢 ========================================
INFO     mypy.apps.ppt2douyin.main:main.py:123 🟢 开始发布 /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out 目录下的文件
INFO     mypy.apps.ppt2douyin.main:log.py:192 🟢 ========================================
WARNING  mypy.lib.music.music:music.py:24 🟠 在 /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin 下未发现歌曲，开始下载 douyin 热门歌曲
INFO     mypy.lib.douyin.douyin_music:douyin_music.py:33 🟢 一共发现 91 条音乐信息
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:88 🔵 ------------------------------------------------------------
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:89 🔵 下载任务数量: 91
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:90 🔵 ------------------------------------------------------------
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:97 🔵 ------------------------------------------------------------
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:98 🔵 生产者数量: 5, 每个生产者负责 20 个任务
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:100 🔵 消费者数量: 20
DEBUG    mypy.lib.mqs.pylib.downloader:downloader.py:101 🔵 ------------------------------------------------------------
INFO     mypy.lib.mqs.pylib.downloader:downloader.py:111 🟢 下载任务结束
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:65 🟢 -----> 正在合并音视频《/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video.mp4》和 《/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/music/街角恋人（剪辑版）.m4a》，并加速到 43s
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:72 🟢 -----> 添加 bgm
DEBUG    mypy.lib.video.ffmpeg_helper:ffmpeg_helper.py:214 🔵 视频时长(43s) < bgm 时长(48.841s)，截取音乐的中间部分
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:93 🟢 -----> 添加演讲语音
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:103 🟢 -----> 把标题添加到视频中间
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:113 🟢 -----> 添加水印: /home/runner/work/github-runner/github-runner/mypy/assets/account/large/logo.png
DEBUG    mypy.lib.video.ffmpeg_helper:ffmpeg_helper.py:81 🔵 ffmpeg 命令: ['-i', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video.mp4', '-i', '/home/runner/work/github-runner/github-runner/mypy/assets/account/large/logo.png', '-ss', '3', '-t', '44', '-i', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/music/街角恋人（剪辑版）.m4a', '-i', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/消化内科护士长竞聘.mp3', '-filter_complex', '[0]setpts=0.6515151515151515*PTS[s0];[s0]fps=fps=30[s1];[s1]drawtext=borderw=3:box=1:boxborderw=30:boxcolor=#02c1b1f6@0.6:enable=between(t\\,0\\,1.5):fontcolor=yellow:fontfile=/home/runner/work/github-runner/github-runner/mypy/assets/font/MiSans-Medium.ttf:fontsize=190.42857142857142:text=消化内科护士长竞聘:x=(w-tw)/2:y=(h-th)/2[s2];[1]scale=iw*50/100:ih*50/100[s3];[s3]colorkey=white:0.05:0[s4];[s2][s4]overlay=eof_action=repeat:x=main_w-overlay_w-20:y=20[s5];[2]volume=volume=0.5[s6];[s6]afade=d=2.904:st=0:t=in[s7];[s7]afade=d=1:st=42:t=out[s8];[3]volume=volume=3.0[s9];[s8][s9]amix=dropout_transition=1:duration=first[s10]', '-map', '[s5]', '-map', '[s10]', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video.mp4']
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:128 🟢 -----> 开始进行视频剪辑 <-----
INFO     mypy.lib.video.video_clip_helper:video_clip_helper.py:337 🟢 -----> 拼接片头
INFO     mypy.lib.video.video_clip_helper:video_clip_helper.py:300 🟢 -----> 开始把视频嵌入到绿幕素材: /home/runner/work/github-runner/github-runner/mypy/assets/account/large/green_screen_background/1.mp4
DEBUG    mypy.lib.video.video_clip_helper:video_clip_helper.py:73 🔵 正在使用 /home/runner/work/github-runner/github-runner/mypy/assets/account/large/green_screen_background/1.mp4 绿幕素材
DEBUG    mypy.lib.video.video_clip_helper:video_clip_helper.py:79 🔵 输出视频分辨率为: (2160, 2854)
WARNING  mypy.lib.video.video_clip_helper:video_clip_helper.py:83 🟠 输入视频强制使用 30 帧率
DEBUG    mypy.lib.video.video_clip_helper:video_clip_helper.py:154 🔵 在第 0.0s 处开始出现绿幕
INFO     mypy.lib.video.utils:utils.py:97 🟢 视频文件 /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening_with_green_sceen_mixed.mp4 正常
INFO     mypy.lib.video.video_clip_helper:video_clip_helper.py:33 🟢 -----> 横屏转成竖屏
DEBUG    /home/runner/work/github-runner/github-runner/mypy/utils/tools.py:tools.py:245 🔵 正在执行命令: ['ffmpeg', '-i', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening_with_green_screen.mp4', '-vf', 'split[a][b]; [a]crop=(ih/16*9):ih,scale=iw/10:-1,gblur=sigma=5,scale=720:1280[1]; [b]scale=720:(720*ih/iw)[2]; [1][2]overlay=0:(H-h)/2', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening_with_green_screen_with_h2v.mp4', '-y']
INFO     mypy.apps.ppt2douyin.ppt_video_handler:ppt_video_handler.py:157 🟢 -----> 视频剪辑完成 <-----
INFO     mypy.lib.playwright.publish_handler:publish_handler.py:105 🟢 -----> 开始发布《/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.mp4》到 ['douyin'] 平台
WARNING  mypy.lib.playwright.publish_handler:log.py:123 🟠 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin 下发现多个 cookie: ['/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_large.json', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_test.json', '/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_middle.json']
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 默认选择第一个 cookie: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_large.json
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 从配置文件中读取的发布账号: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_large.json
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 正在使用 [/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/config/cookie/douyin/cookie_large.json] 发布作品
WARNING  mypy.lib.proxy_pool.proxy_pool_helper:proxy_pool_helper.py:49 🟠 未找到可用的 深圳(https) 代理地址
DEBUG    mypy.lib.playwright.publish_handler:log.py:117 🔵 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 从文件标题解析出话题: #竞聘 #护士长 #内科
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - ============================================================
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - [DouyinVideoPublishHelper] 开始执行发布任务
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - ============================================================
INFO     mypy.lib.playwright.publish_handler:log.py:120 🟢 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 当前登录账号为 [医护PPT代做]
DEBUG    mypy.lib.playwright.publish_handler:log.py:117 🔵 [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 准备上传文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.mp4
CRITICAL mypy.lib.playwright.publish_handler:log.py:129 ❌ [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 发生异常: Traceback (most recent call last):
  File "/home/runner/work/github-runner/github-runner/mypy/lib/douyin/publish_helper.py", line 343, in upload
    await page.click(upload_locator)
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/async_api/_generated.py", line 9631, in click
    await self._impl_obj.click(
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_page.py", line 777, in click
    return await self._main_frame.click(**locals_to_params(locals()))
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 488, in click
    await self._channel.send("click", locals_to_params(locals()))
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 59, in send
    return await self._connection.wrap_api_call(
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 514, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TimeoutError: Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")



CRITICAL mypy.lib.playwright.publish_handler:log.py:129 ❌ [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 《消化内科护士长竞聘》发布异常: Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")

ERROR    mypy.lib.playwright.common:common.py:170 🔴 Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")
Traceback (most recent call last):
  File "/home/runner/work/github-runner/github-runner/mypy/lib/playwright/common.py", line 168, in launch_browser_mgr
    yield browser, context, page
  File "/home/runner/work/github-runner/github-runner/mypy/lib/playwright/core/publish_helper.py", line 161, in publish_mission
    raise ex
  File "/home/runner/work/github-runner/github-runner/mypy/lib/playwright/core/publish_helper.py", line 148, in publish_mission
    await self.upload(page)
  File "/home/runner/work/github-runner/github-runner/mypy/lib/douyin/video_publish_helper.py", line 102, in upload
    return await super().upload(page=page,
  File "/home/runner/work/github-runner/github-runner/mypy/lib/douyin/publish_helper.py", line 350, in upload
    raise ex
  File "/home/runner/work/github-runner/github-runner/mypy/lib/douyin/publish_helper.py", line 343, in upload
    await page.click(upload_locator)
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/async_api/_generated.py", line 9631, in click
    await self._impl_obj.click(
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_page.py", line 777, in click
    return await self._main_frame.click(**locals_to_params(locals()))
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 488, in click
    await self._channel.send("click", locals_to_params(locals()))
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 59, in send
    return await self._connection.wrap_api_call(
  File "/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 514, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TimeoutError: Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")

CRITICAL mypy.lib.playwright.publish_handler:log.py:129 ❌ [platform: douyin], [publish_file: 消化内科护士长竞聘.mp4] - 《消化内科护士长竞聘》发布异常: Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")

WARNING  mypy.lib.playwright.publish_handler:publish_handler.py:82 🟠 [/home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.mp4] 发布到 [douyin] 失败，原因: [Page.click: Timeout 120000ms exceeded.
Call log:
waiting for locator(".upload--2sMLw")
]
INFO     mypy.apps.ppt2douyin.video2douyin:video2douyin.py:125 🟢 -----> 清理 消化内科护士长竞聘.mp4 临时文件
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening.mp3
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening_with_green_sceen_mixed.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.pdf
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video_with_opening_with_green_screen.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘_ppt2video_merge_audio_and_video.mp4
WARNING  mypy.utils.file:file.py:212 🟠 正在删除文件名前缀为 消化内科护士长竞聘 文件: /home/runner/work/github-runner/github-runner/mypy/tests/apps/ppt2douyin/消化内科护士长竞聘.mp3
INFO     mypy.apps.ppt2douyin.video2douyin:video2douyin.py:134 🟢 继续处理下一个视频...
INFO     mypy.apps.ppt2douyin.video2douyin:video2douyin.py:135 🟢 处理完成，一共处理了 1 个视频