{"uid":"99b3cf1cee2099a4","name":"test_random_music","fullName":"lib.music.test_music#test_random_music","historyId":"b24072e5b81c4559c859f23e6bdf58cd","time":{"start":1720192068966,"stop":1720192084421,"duration":15455},"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\Music/_out/music/oQMeDffLaEmgMwgCOEMAFCI6INzoFPgWdD0rsa' -> 'D:\\\\Music/_out/music/D:\\\\Music/_out/music/LoveU2（1.1倍速版）.mp3'","statusTrace":"def test_random_music():\n>       music = MusicHelper.random_music()\n\nmypy/tests/lib/music/test_music.py:15: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/music/music.py:29: in random_music\n    DouyinMusic(music_download_dir).download()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.douyin.douyin_music.DouyinMusic object at 0x7f23c434b2e0>\n\n    def download(self):\n        \"\"\"\n        下载抖音热门歌曲\n        \"\"\"\n        music_list = self._get_hot_music_info()\n    \n        music_urls = []\n        dl_filepath2name = {}\n        for item in music_list:\n            music_info = item['music_info']\n            uri = music_info['play_url']['uri']\n            music_urls.append(uri)\n            expect_dl_filepath = os.path.join(\n                self._download_dir, os.path.basename(uri))\n            dl_filepath2name[expect_dl_filepath] = os.path.join(\n                self._download_dir, music_info['title'] + '.mp3')\n    \n        if FileUtil.is_all_path_exists(dl_filepath2name.values()):\n            LOG.warning('需下载的文件已经全都存在')\n            return\n    \n        api = Downloader(urls=music_urls,\n                         per_producer_mission_cnt=20,\n                         download_dir=self._download_dir,\n                         consumer_count=20)\n        api.do_download()\n    \n        # 批量重命名\n        for dl_filepath, music_name in dl_filepath2name.items():\n            # 重命名文件\n            new_path = os.path.join(self._download_dir, music_name)\n>           os.rename(dl_filepath, new_path)\nE           FileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\Music/_out/music/oQMeDffLaEmgMwgCOEMAFCI6INzoFPgWdD0rsa' -> 'D:\\\\Music/_out/music/D:\\\\Music/_out/music/LoveU2（1.1倍速版）.mp3'\n\nmypy/lib/douyin/douyin_music.py:63: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1720188725402,"stop":1720188725402,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1720192068964,"stop":1720192068966,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\Music/_out/music/oQMeDffLaEmgMwgCOEMAFCI6INzoFPgWdD0rsa' -> 'D:\\\\Music/_out/music/D:\\\\Music/_out/music/LoveU2（1.1倍速版）.mp3'","statusTrace":"def test_random_music():\n>       music = MusicHelper.random_music()\n\nmypy/tests/lib/music/test_music.py:15: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/music/music.py:29: in random_music\n    DouyinMusic(music_download_dir).download()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.douyin.douyin_music.DouyinMusic object at 0x7f23c434b2e0>\n\n    def download(self):\n        \"\"\"\n        下载抖音热门歌曲\n        \"\"\"\n        music_list = self._get_hot_music_info()\n    \n        music_urls = []\n        dl_filepath2name = {}\n        for item in music_list:\n            music_info = item['music_info']\n            uri = music_info['play_url']['uri']\n            music_urls.append(uri)\n            expect_dl_filepath = os.path.join(\n                self._download_dir, os.path.basename(uri))\n            dl_filepath2name[expect_dl_filepath] = os.path.join(\n                self._download_dir, music_info['title'] + '.mp3')\n    \n        if FileUtil.is_all_path_exists(dl_filepath2name.values()):\n            LOG.warning('需下载的文件已经全都存在')\n            return\n    \n        api = Downloader(urls=music_urls,\n                         per_producer_mission_cnt=20,\n                         download_dir=self._download_dir,\n                         consumer_count=20)\n        api.do_download()\n    \n        # 批量重命名\n        for dl_filepath, music_name in dl_filepath2name.items():\n            # 重命名文件\n            new_path = os.path.join(self._download_dir, music_name)\n>           os.rename(dl_filepath, new_path)\nE           FileNotFoundError: [Errno 2] No such file or directory: 'D:\\\\Music/_out/music/oQMeDffLaEmgMwgCOEMAFCI6INzoFPgWdD0rsa' -> 'D:\\\\Music/_out/music/D:\\\\Music/_out/music/LoveU2（1.1倍速版）.mp3'\n\nmypy/lib/douyin/douyin_music.py:63: FileNotFoundError","steps":[],"attachments":[{"uid":"2e9f4dde06561296","name":"log","source":"2e9f4dde06561296.txt","type":"text/plain","size":1057}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1720192084432,"stop":1720192084432,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"audio"},{"name":"parentSuite","value":"lib.music"},{"name":"suite","value":"test_music"},{"name":"host","value":"fv-az881-65"},{"name":"thread","value":"8026-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.music.test_music"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["audio"]},"source":"99b3cf1cee2099a4.json","parameterValues":[]}