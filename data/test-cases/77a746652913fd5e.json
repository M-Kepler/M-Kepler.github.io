{"uid":"77a746652913fd5e","name":"test_web2douyin[zhihu_zhuanlan-https://zhuanlan.zhihu.com/p/711679452]","fullName":"apps.web2douyin.test_web2douyin#test_web2douyin","historyId":"47fd3d0008e9e6c34252ad65118f94bc","time":{"start":1728641828816,"stop":1728641829090,"duration":274},"description":"\n    测试网页内容发不到 douyin\n    ","descriptionHtml":"<pre><code>测试网页内容发不到 douyin\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get_text'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/apps/web2douyin/_out/test_web2douyin'\nplatform = 'zhihu_zhuanlan', url = 'https://zhuanlan.zhihu.com/p/711679452'\n\n    @pytest.mark.parametrize(\n        'platform, url',\n        [\n            ('cnblogs', 'https://www.cnblogs.com/testlearn/p/15693366.html'),\n            ('csdn', 'https://blog.csdn.net/qq_40999403/article/details/140129103'),\n            ('wexin', 'https://mp.weixin.qq.com/s/I2QHEBO26nGqhGwIw281Pg'),\n            ('dingxiangyishegn_mobile', 'https://m.dxy.com/article/50056'),\n            ('dingxiangyishegn_web', 'https://dxy.com/article/50056'),\n            ('zhihu_zhuanlan', 'https://zhuanlan.zhihu.com/p/711679452')\n        ])\n    def test_web2douyin(test_output_dir, platform, url):\n        \"\"\"\n        测试网页内容发不到 douyin\n        \"\"\"\n        # 在测试开始前， conftest.py 已经把 config 文件夹拷贝进来了\n        source_config_dir = os.path.join(curr_dir, 'config')\n        work_path = test_output_dir\n    \n        _ = platform\n    \n        with FileUtil.copy_file_context([source_config_dir], work_path):\n            config_path = os.path.join(work_path, 'config', 'config.ini')\n            set_config(config_path=config_path,\n                       settings={\n                           ('publish', 'media_type'): Const.MEDIA_TYPE_IMG_ARTICLE,\n                           ('publish', 'publish_account'): Account.TEST\n                       })\n>           main(url=url, work_path=work_path)\n\nmypy/tests/apps/web2douyin/test_web2douyin.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/web2douyin/main.py:40: in main\n    title = api.get_post_title()\nmypy/lib/html/html_converter.py:90: in get_post_title\n    title = self._website_handler.get_post_title(self._website_soup)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.html.web_locator.ZhihuZhuanlanLocator object at 0x7f68cfa1cbb0>\nsoup = <!DOCTYPE html>\n<html lang=\"en\"><head><meta charset=\"utf-8\"/></head><body><div style=\"color:#535861;opacity: 0.1;displ...='{\"appName\":\"zse_ck\",\"trackJSRuntimeError\":true}' src=\"https://static.zhihu.com/zse-ck/v3.js\"></script></body></html>\n\n\n    def get_post_title(self, soup):\n>       return soup.find('h1', class_='Post-Title').get_text(strip=True)\nE       AttributeError: 'NoneType' object has no attribute 'get_text'\n\nmypy/lib/html/web_locator.py:131: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1728639928624,"stop":1728639928625,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1728641637482,"stop":1728641637484,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1728641637484,"stop":1728641637485,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    测试网页内容发不到 douyin\n    ","status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get_text'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/apps/web2douyin/_out/test_web2douyin'\nplatform = 'zhihu_zhuanlan', url = 'https://zhuanlan.zhihu.com/p/711679452'\n\n    @pytest.mark.parametrize(\n        'platform, url',\n        [\n            ('cnblogs', 'https://www.cnblogs.com/testlearn/p/15693366.html'),\n            ('csdn', 'https://blog.csdn.net/qq_40999403/article/details/140129103'),\n            ('wexin', 'https://mp.weixin.qq.com/s/I2QHEBO26nGqhGwIw281Pg'),\n            ('dingxiangyishegn_mobile', 'https://m.dxy.com/article/50056'),\n            ('dingxiangyishegn_web', 'https://dxy.com/article/50056'),\n            ('zhihu_zhuanlan', 'https://zhuanlan.zhihu.com/p/711679452')\n        ])\n    def test_web2douyin(test_output_dir, platform, url):\n        \"\"\"\n        测试网页内容发不到 douyin\n        \"\"\"\n        # 在测试开始前， conftest.py 已经把 config 文件夹拷贝进来了\n        source_config_dir = os.path.join(curr_dir, 'config')\n        work_path = test_output_dir\n    \n        _ = platform\n    \n        with FileUtil.copy_file_context([source_config_dir], work_path):\n            config_path = os.path.join(work_path, 'config', 'config.ini')\n            set_config(config_path=config_path,\n                       settings={\n                           ('publish', 'media_type'): Const.MEDIA_TYPE_IMG_ARTICLE,\n                           ('publish', 'publish_account'): Account.TEST\n                       })\n>           main(url=url, work_path=work_path)\n\nmypy/tests/apps/web2douyin/test_web2douyin.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/web2douyin/main.py:40: in main\n    title = api.get_post_title()\nmypy/lib/html/html_converter.py:90: in get_post_title\n    title = self._website_handler.get_post_title(self._website_soup)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.html.web_locator.ZhihuZhuanlanLocator object at 0x7f68cfa1cbb0>\nsoup = <!DOCTYPE html>\n<html lang=\"en\"><head><meta charset=\"utf-8\"/></head><body><div style=\"color:#535861;opacity: 0.1;displ...='{\"appName\":\"zse_ck\",\"trackJSRuntimeError\":true}' src=\"https://static.zhihu.com/zse-ck/v3.js\"></script></body></html>\n\n\n    def get_post_title(self, soup):\n>       return soup.find('h1', class_='Post-Title').get_text(strip=True)\nE       AttributeError: 'NoneType' object has no attribute 'get_text'\n\nmypy/lib/html/web_locator.py:131: AttributeError","steps":[],"attachments":[{"uid":"bc56f93e8c28dc41","name":"log","source":"bc56f93e8c28dc41.txt","type":"text/plain","size":435}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_output_dir::0","time":{"start":1728641829101,"stop":1728641829101,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir::finish_callback","time":{"start":1728641829101,"stop":1728641829102,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"apps.web2douyin"},{"name":"suite","value":"test_web2douyin"},{"name":"host","value":"fv-az2021-771"},{"name":"thread","value":"10015-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"apps.web2douyin.test_web2douyin"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"platform","value":"'zhihu_zhuanlan'"},{"name":"url","value":"'https://zhuanlan.zhihu.com/p/711679452'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"77a746652913fd5e.json","parameterValues":["'zhihu_zhuanlan'","'https://zhuanlan.zhihu.com/p/711679452'"]}