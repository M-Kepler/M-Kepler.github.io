{"uid":"78313723a25c72bd","name":"test_get_hot_douyin","fullName":"lib.douyin.test_get_hot_douyin#test_get_hot_douyin","historyId":"6fd327effe51b45a4f9211c3976674de","time":{"start":1712579017345,"stop":1712579019186,"duration":1841},"status":"skipped","statusMessage":"XFAIL API 有限制，可能会获取 cookie 失败\n\nFileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin/config/cookie/cookie_17688150852.txt'","statusTrace":"test_output_dir = '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin'\n\n    @pytest.mark.xfail(reason='API 有限制，可能会获取 cookie 失败')\n    def test_get_hot_douyin(test_output_dir):\n>       HotDouyinHandler(test_output_dir).handle()\n\nmypy/tests/lib/douyin/test_get_hot_douyin.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/douyin/get_hot_video.py:270: in handle\n    raise ex\nmypy/lib/douyin/get_hot_video.py:261: in handle\n    video_url = self._get_douyin_hot_music_video()\nmypy/lib/douyin/get_hot_video.py:177: in _get_douyin_hot_music_video\n    jd, res = self._get_douyin_music_video()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.douyin.get_hot_video.HotDouyinHandler object at 0x7fb0c691be80>\n\n    def _get_douyin_music_video(self):\n        \"\"\"\n        根据音乐id获取音乐视频列表\n        :param music_id:\n        :return:\n        \"\"\"\n    \n        if self.music_id:\n            music_id = self.music_id\n        else:\n            music_id = spider_cfg.def_music_id\n    \n        pages = []\n        for x in range(0, 20):\n            pages.append(x * 10)\n    \n        self.page = random.choice(pages)\n        url = spider_cfg.music_video_url % {\n            \"page\": self.page,\n            \"music_id\": music_id}\n        headers = spider_cfg.get_header(\n            web_ua=spider_cfg.ua['web'],\n            music_id=music_id)\n    \n        cookie_filepath = os.path.join(\n            self.work_path, 'config', 'cookie', 'cookie_17688150852.txt')\n>       with open(cookie_filepath, mode='r', encoding='utf-8') as fd:\nE       FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin/config/cookie/cookie_17688150852.txt'\n\nmypy/lib/douyin/get_hot_video.py:127: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_output_dir","time":{"start":1712579017345,"stop":1712579017345,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL API 有限制，可能会获取 cookie 失败\n\nFileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin/config/cookie/cookie_17688150852.txt'","statusTrace":"test_output_dir = '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin'\n\n    @pytest.mark.xfail(reason='API 有限制，可能会获取 cookie 失败')\n    def test_get_hot_douyin(test_output_dir):\n>       HotDouyinHandler(test_output_dir).handle()\n\nmypy/tests/lib/douyin/test_get_hot_douyin.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/douyin/get_hot_video.py:270: in handle\n    raise ex\nmypy/lib/douyin/get_hot_video.py:261: in handle\n    video_url = self._get_douyin_hot_music_video()\nmypy/lib/douyin/get_hot_video.py:177: in _get_douyin_hot_music_video\n    jd, res = self._get_douyin_music_video()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.douyin.get_hot_video.HotDouyinHandler object at 0x7fb0c691be80>\n\n    def _get_douyin_music_video(self):\n        \"\"\"\n        根据音乐id获取音乐视频列表\n        :param music_id:\n        :return:\n        \"\"\"\n    \n        if self.music_id:\n            music_id = self.music_id\n        else:\n            music_id = spider_cfg.def_music_id\n    \n        pages = []\n        for x in range(0, 20):\n            pages.append(x * 10)\n    \n        self.page = random.choice(pages)\n        url = spider_cfg.music_video_url % {\n            \"page\": self.page,\n            \"music_id\": music_id}\n        headers = spider_cfg.get_header(\n            web_ua=spider_cfg.ua['web'],\n            music_id=music_id)\n    \n        cookie_filepath = os.path.join(\n            self.work_path, 'config', 'cookie', 'cookie_17688150852.txt')\n>       with open(cookie_filepath, mode='r', encoding='utf-8') as fd:\nE       FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/lib/douyin/_out/test_get_hot_douyin/config/cookie/cookie_17688150852.txt'\n\nmypy/lib/douyin/get_hot_video.py:127: FileNotFoundError","steps":[],"attachments":[{"uid":"a5300b4b6c6d2bad","name":"log","source":"a5300b4b6c6d2bad.txt","type":"text/plain","size":1164}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_output_dir::0","time":{"start":1712579019206,"stop":1712579019206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(reason='API 有限制，可能会获取 cookie 失败')"},{"name":"tag","value":"douyin"},{"name":"parentSuite","value":"lib.douyin"},{"name":"suite","value":"test_get_hot_douyin"},{"name":"host","value":"fv-az985-89"},{"name":"thread","value":"7147-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.douyin.test_get_hot_douyin"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["@pytest.mark.xfail(reason='API 有限制，可能会获取 cookie 失败')","douyin"]},"source":"78313723a25c72bd.json","parameterValues":[]}