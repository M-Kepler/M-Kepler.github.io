{"uid":"28123b9d192695c5","name":"test_ppt2douyin[video]","fullName":"apps.ppt2douyin.test_ppt2douyin#test_ppt2douyin","historyId":"648144a04894eb8a1dbe15f6c9795674","time":{"start":1714789115832,"stop":1714789133869,"duration":18037},"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'","statusTrace":"publish_media_type = 'video'\n\n    @pytest.mark.parametrize('publish_media_type', [\n        Const.MEDIA_TYPE_IMG_ARTICLE, Const.MEDIA_TYPE_VIDEO],\n        ids=[Const.MEDIA_TYPE_IMG_ARTICLE, Const.MEDIA_TYPE_VIDEO])\n    def test_ppt2douyin(publish_media_type):\n        set_publish_cfg(config_path=config_path,\n                        option='media_type',\n                        value=publish_media_type)\n    \n>       main(work_path=curr_dir)\n\nmypy/tests/apps/ppt2douyin/test_ppt2douyin.py:23: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/ppt2douyin/main.py:36: in main\n    raise ex\nmypy/apps/ppt2douyin/main.py:23: in main\n    ppt_transfer.batch_ppt2transfer()\nmypy/apps/ppt2douyin/ppt2video.py:145: in batch_ppt2transfer\n    self._ppt_trans(ppt_file)\nmypy/apps/ppt2douyin/ppt2video.py:129: in _ppt_trans\n    raise ex\nmypy/apps/ppt2douyin/ppt2video.py:126: in _ppt_trans\n    self._ppt_handler(ppt_path, output_filepath)\nmypy/apps/ppt2douyin/ppt2video.py:44: in make_ppt2video\n    self.make_ppt2image_article(ppt_path=ppt_path,\nmypy/apps/ppt2douyin/ppt2video.py:66: in make_ppt2image_article\n    image_stitch_helper.make_coverage(\nmypy/lib/image/image_stitch.py:201: in make_coverage\n    toImage.save(output_filepath)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <PIL.Image.Image image mode=RGB size=2667x3768 at 0x7FC429284A30>\nfp = '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\nformat = 'JPEG', params = {}\nfilename = '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\nopen_fp = True, save_all = False, filename_ext = '.jpg', ext = '.jpg'\n\n    def save(self, fp, format=None, **params) -> None:\n        \"\"\"\n        Saves this image under the given filename.  If no format is\n        specified, the format to use is determined from the filename\n        extension, if possible.\n    \n        Keyword options can be used to provide additional instructions\n        to the writer. If a writer doesn't recognise an option, it is\n        silently ignored. The available options are described in the\n        :doc:`image format documentation\n        <../handbook/image-file-formats>` for each writer.\n    \n        You can use a file object instead of a filename. In this case,\n        you must always specify the format. The file object must\n        implement the ``seek``, ``tell``, and ``write``\n        methods, and be opened in binary mode.\n    \n        :param fp: A filename (string), os.PathLike object or file object.\n        :param format: Optional format override.  If omitted, the\n           format to use is determined from the filename extension.\n           If a file object was used instead of a filename, this\n           parameter should always be used.\n        :param params: Extra parameters to the image writer.\n        :returns: None\n        :exception ValueError: If the output format could not be determined\n           from the file name.  Use the format option to solve this.\n        :exception OSError: If the file could not be written.  The file\n           may have been created, and may contain partial data.\n        \"\"\"\n    \n        filename: str | bytes = \"\"\n        open_fp = False\n        if is_path(fp):\n            filename = os.path.realpath(os.fspath(fp))\n            open_fp = True\n        elif fp == sys.stdout:\n            try:\n                fp = sys.stdout.buffer\n            except AttributeError:\n                pass\n        if not filename and hasattr(fp, \"name\") and is_path(fp.name):\n            # only set the name for metadata purposes\n            filename = os.path.realpath(os.fspath(fp.name))\n    \n        # may mutate self!\n        self._ensure_mutable()\n    \n        save_all = params.pop(\"save_all\", False)\n        self.encoderinfo = params\n        self.encoderconfig = ()\n    \n        preinit()\n    \n        filename_ext = os.path.splitext(filename)[1].lower()\n        ext = filename_ext.decode() if isinstance(filename_ext, bytes) else filename_ext\n    \n        if not format:\n            if ext not in EXTENSION:\n                init()\n            try:\n                format = EXTENSION[ext]\n            except KeyError as e:\n                msg = f\"unknown file extension: {ext}\"\n                raise ValueError(msg) from e\n    \n        if format.upper() not in SAVE:\n            init()\n        if save_all:\n            save_handler = SAVE_ALL[format.upper()]\n        else:\n            save_handler = SAVE[format.upper()]\n    \n        created = False\n        if open_fp:\n            created = not os.path.exists(filename)\n            if params.get(\"append\", False):\n                # Open also for reading (\"+\"), because TIFF save_all\n                # writer needs to go back and edit the written data.\n                fp = builtins.open(filename, \"r+b\")\n            else:\n>               fp = builtins.open(filename, \"w+b\")\nE               FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/PIL/Image.py:2456: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1714789026477,"stop":1714789026478,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1714789094347,"stop":1714789094349,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'","statusTrace":"publish_media_type = 'video'\n\n    @pytest.mark.parametrize('publish_media_type', [\n        Const.MEDIA_TYPE_IMG_ARTICLE, Const.MEDIA_TYPE_VIDEO],\n        ids=[Const.MEDIA_TYPE_IMG_ARTICLE, Const.MEDIA_TYPE_VIDEO])\n    def test_ppt2douyin(publish_media_type):\n        set_publish_cfg(config_path=config_path,\n                        option='media_type',\n                        value=publish_media_type)\n    \n>       main(work_path=curr_dir)\n\nmypy/tests/apps/ppt2douyin/test_ppt2douyin.py:23: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/ppt2douyin/main.py:36: in main\n    raise ex\nmypy/apps/ppt2douyin/main.py:23: in main\n    ppt_transfer.batch_ppt2transfer()\nmypy/apps/ppt2douyin/ppt2video.py:145: in batch_ppt2transfer\n    self._ppt_trans(ppt_file)\nmypy/apps/ppt2douyin/ppt2video.py:129: in _ppt_trans\n    raise ex\nmypy/apps/ppt2douyin/ppt2video.py:126: in _ppt_trans\n    self._ppt_handler(ppt_path, output_filepath)\nmypy/apps/ppt2douyin/ppt2video.py:44: in make_ppt2video\n    self.make_ppt2image_article(ppt_path=ppt_path,\nmypy/apps/ppt2douyin/ppt2video.py:66: in make_ppt2image_article\n    image_stitch_helper.make_coverage(\nmypy/lib/image/image_stitch.py:201: in make_coverage\n    toImage.save(output_filepath)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <PIL.Image.Image image mode=RGB size=2667x3768 at 0x7FC429284A30>\nfp = '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\nformat = 'JPEG', params = {}\nfilename = '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\nopen_fp = True, save_all = False, filename_ext = '.jpg', ext = '.jpg'\n\n    def save(self, fp, format=None, **params) -> None:\n        \"\"\"\n        Saves this image under the given filename.  If no format is\n        specified, the format to use is determined from the filename\n        extension, if possible.\n    \n        Keyword options can be used to provide additional instructions\n        to the writer. If a writer doesn't recognise an option, it is\n        silently ignored. The available options are described in the\n        :doc:`image format documentation\n        <../handbook/image-file-formats>` for each writer.\n    \n        You can use a file object instead of a filename. In this case,\n        you must always specify the format. The file object must\n        implement the ``seek``, ``tell``, and ``write``\n        methods, and be opened in binary mode.\n    \n        :param fp: A filename (string), os.PathLike object or file object.\n        :param format: Optional format override.  If omitted, the\n           format to use is determined from the filename extension.\n           If a file object was used instead of a filename, this\n           parameter should always be used.\n        :param params: Extra parameters to the image writer.\n        :returns: None\n        :exception ValueError: If the output format could not be determined\n           from the file name.  Use the format option to solve this.\n        :exception OSError: If the file could not be written.  The file\n           may have been created, and may contain partial data.\n        \"\"\"\n    \n        filename: str | bytes = \"\"\n        open_fp = False\n        if is_path(fp):\n            filename = os.path.realpath(os.fspath(fp))\n            open_fp = True\n        elif fp == sys.stdout:\n            try:\n                fp = sys.stdout.buffer\n            except AttributeError:\n                pass\n        if not filename and hasattr(fp, \"name\") and is_path(fp.name):\n            # only set the name for metadata purposes\n            filename = os.path.realpath(os.fspath(fp.name))\n    \n        # may mutate self!\n        self._ensure_mutable()\n    \n        save_all = params.pop(\"save_all\", False)\n        self.encoderinfo = params\n        self.encoderconfig = ()\n    \n        preinit()\n    \n        filename_ext = os.path.splitext(filename)[1].lower()\n        ext = filename_ext.decode() if isinstance(filename_ext, bytes) else filename_ext\n    \n        if not format:\n            if ext not in EXTENSION:\n                init()\n            try:\n                format = EXTENSION[ext]\n            except KeyError as e:\n                msg = f\"unknown file extension: {ext}\"\n                raise ValueError(msg) from e\n    \n        if format.upper() not in SAVE:\n            init()\n        if save_all:\n            save_handler = SAVE_ALL[format.upper()]\n        else:\n            save_handler = SAVE[format.upper()]\n    \n        created = False\n        if open_fp:\n            created = not os.path.exists(filename)\n            if params.get(\"append\", False):\n                # Open also for reading (\"+\"), because TIFF save_all\n                # writer needs to go back and edit the written data.\n                fp = builtins.open(filename, \"r+b\")\n            else:\n>               fp = builtins.open(filename, \"w+b\")\nE               FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/Python/Python/mypy/tests/apps/ppt2douyin/_out/消化内科护士长竞聘.jpg'\n\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/site-packages/PIL/Image.py:2456: FileNotFoundError","steps":[],"attachments":[{"uid":"b132e5dda191be32","name":"log","source":"b132e5dda191be32.txt","type":"text/plain","size":6893}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1714789133951,"stop":1714789133952,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"apps.ppt2douyin"},{"name":"suite","value":"test_ppt2douyin"},{"name":"host","value":"fv-az1417-349"},{"name":"thread","value":"6457-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"apps.ppt2douyin.test_ppt2douyin"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"publish_media_type","value":"'video'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"28123b9d192695c5.json","parameterValues":["'video'"]}