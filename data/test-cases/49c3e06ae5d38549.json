{"uid":"49c3e06ae5d38549","name":"test_create_backups","fullName":"utils.test_file#test_create_backups","historyId":"07b24f006f215784ef8a488d8ff50467","time":{"start":1724426407077,"stop":1724426407093,"duration":16},"description":"\n    测试创建多个文件备份\n    ","descriptionHtml":"<pre><code>测试创建多个文件备份\n</code></pre>\n","status":"broken","statusMessage":"TypeError: expected str, bytes or os.PathLike object, not list","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/utils/_out/test_file'\n\n    def test_create_backups(test_output_dir):\n        \"\"\"\n        测试创建多个文件备份\n        \"\"\"\n        output_dir = os.path.join(test_output_dir, curr_func_name())\n        os.makedirs(output_dir, exist_ok=True)\n        with FileUtil.copy_file_context(Assets.ppt, output_dir) as test_file:\n>           FileUtil.create_backups(test_file, 3)\n\nmypy/tests/utils/test_file.py:139: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/utils/file.py:357: in create_backups\n    base_name, ext = os.path.splitext(source_file)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\np = ['/home/runner/work/github-runner/github-runner/mypy/tests/utils/_out/test_file/test_create_backups/ppt.pptx']\n\n    def splitext(p):\n>       p = os.fspath(p)\nE       TypeError: expected str, bytes or os.PathLike object, not list\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/posixpath.py:118: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1724418389991,"stop":1724418389991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1724426407046,"stop":1724426407047,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1724426407050,"stop":1724426407051,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    测试创建多个文件备份\n    ","status":"broken","statusMessage":"TypeError: expected str, bytes or os.PathLike object, not list","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/utils/_out/test_file'\n\n    def test_create_backups(test_output_dir):\n        \"\"\"\n        测试创建多个文件备份\n        \"\"\"\n        output_dir = os.path.join(test_output_dir, curr_func_name())\n        os.makedirs(output_dir, exist_ok=True)\n        with FileUtil.copy_file_context(Assets.ppt, output_dir) as test_file:\n>           FileUtil.create_backups(test_file, 3)\n\nmypy/tests/utils/test_file.py:139: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/utils/file.py:357: in create_backups\n    base_name, ext = os.path.splitext(source_file)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\np = ['/home/runner/work/github-runner/github-runner/mypy/tests/utils/_out/test_file/test_create_backups/ppt.pptx']\n\n    def splitext(p):\n>       p = os.fspath(p)\nE       TypeError: expected str, bytes or os.PathLike object, not list\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/posixpath.py:118: TypeError","steps":[],"attachments":[{"uid":"cbb676fffc20253b","name":"log","source":"cbb676fffc20253b.txt","type":"text/plain","size":442}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1724426407370,"stop":1724426407371,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir::0","time":{"start":1724426407370,"stop":1724426407370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"utils"},{"name":"parentSuite","value":"utils"},{"name":"suite","value":"test_file"},{"name":"host","value":"fv-az1016-466"},{"name":"thread","value":"8923-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"utils.test_file"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["utils"]},"source":"49c3e06ae5d38549.json","parameterValues":[]}