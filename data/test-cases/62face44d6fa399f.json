{"uid":"62face44d6fa399f","name":"test_baidu_aigc[doc]","fullName":"lib.baidu.test_baidu_aigc#test_baidu_aigc","historyId":"0a84adeeb485dbc1b1207efd480aa7bf","time":{"start":1724422185058,"stop":1724422185059,"duration":1},"description":"\n    测试 baidu 生成 PPT / DOC\n    ","descriptionHtml":"<pre><code>测试 baidu 生成 PPT / DOC\n</code></pre>\n","status":"broken","statusMessage":"Exception: 在 /home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc/test_baidu_aigc/doc/config/cookie/baidu 下未找到 cookie","statusTrace":"aigc_type = 'doc'\ntest_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc'\n\n    @pytest.mark.parametrize(\n        'aigc_type',\n        [Const.FILE_TYPE_PPT, Const.FILE_TYPE_DOC],\n        ids=[Const.FILE_TYPE_PPT, Const.FILE_TYPE_DOC])\n    def test_baidu_aigc(aigc_type, test_output_dir):\n        \"\"\"\n        测试 baidu 生成 PPT / DOC\n        \"\"\"\n        output_dir = os.path.join(\n            test_output_dir, curr_func_name(), aigc_type)\n        os.makedirs(output_dir, exist_ok=True)\n    \n        # 是否不 打开浏览器\n        # dont_open_browser = True\n        dont_open_browser = False\n    \n        api = BaiduAigc(topic_cnt=1,\n                        run_mod=Const.RUNMOD_AUTO,\n                        headless=not dont_open_browser,\n                        handle_captcha=True,\n                        work_path=output_dir,\n                        aigc_type=aigc_type)\n>       api.handle()\n\nmypy/tests/lib/baidu/test_baidu_aigc.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/baidu/baidu_aigc.py:181: in handle\n    asyncio.run(self.async_handle())\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/asyncio/base_events.py:647: in run_until_complete\n    return future.result()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.baidu.baidu_aigc.BaiduAigc object at 0x7fb9a40f7eb0>\n\n    async def async_handle(self):\n        # 获取 cookie 文件\n        cookie_dir = get_cookie_dir(work_path=self._work_path,\n                                    platform=Platforms.PLT_BAIDU)\n        cookie_list = FileUtil.list_files_by_ext(\n            find_path=cookie_dir, find_exts=[\".json\"])\n        if not cookie_list:\n            LOG.warning('在 %s 下未找到 cookie', cookie_dir)\n>           raise Exception(f'在 {cookie_dir} 下未找到 cookie')\nE           Exception: 在 /home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc/test_baidu_aigc/doc/config/cookie/baidu 下未找到 cookie\n\nmypy/lib/baidu/baidu_aigc.py:158: Exception","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1724418389991,"stop":1724418389991,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1724422179809,"stop":1724422179810,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1724422185006,"stop":1724422185006,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    测试 baidu 生成 PPT / DOC\n    ","status":"broken","statusMessage":"Exception: 在 /home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc/test_baidu_aigc/doc/config/cookie/baidu 下未找到 cookie","statusTrace":"aigc_type = 'doc'\ntest_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc'\n\n    @pytest.mark.parametrize(\n        'aigc_type',\n        [Const.FILE_TYPE_PPT, Const.FILE_TYPE_DOC],\n        ids=[Const.FILE_TYPE_PPT, Const.FILE_TYPE_DOC])\n    def test_baidu_aigc(aigc_type, test_output_dir):\n        \"\"\"\n        测试 baidu 生成 PPT / DOC\n        \"\"\"\n        output_dir = os.path.join(\n            test_output_dir, curr_func_name(), aigc_type)\n        os.makedirs(output_dir, exist_ok=True)\n    \n        # 是否不 打开浏览器\n        # dont_open_browser = True\n        dont_open_browser = False\n    \n        api = BaiduAigc(topic_cnt=1,\n                        run_mod=Const.RUNMOD_AUTO,\n                        headless=not dont_open_browser,\n                        handle_captcha=True,\n                        work_path=output_dir,\n                        aigc_type=aigc_type)\n>       api.handle()\n\nmypy/tests/lib/baidu/test_baidu_aigc.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/baidu/baidu_aigc.py:181: in handle\n    asyncio.run(self.async_handle())\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/asyncio/base_events.py:647: in run_until_complete\n    return future.result()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.baidu.baidu_aigc.BaiduAigc object at 0x7fb9a40f7eb0>\n\n    async def async_handle(self):\n        # 获取 cookie 文件\n        cookie_dir = get_cookie_dir(work_path=self._work_path,\n                                    platform=Platforms.PLT_BAIDU)\n        cookie_list = FileUtil.list_files_by_ext(\n            find_path=cookie_dir, find_exts=[\".json\"])\n        if not cookie_list:\n            LOG.warning('在 %s 下未找到 cookie', cookie_dir)\n>           raise Exception(f'在 {cookie_dir} 下未找到 cookie')\nE           Exception: 在 /home/runner/work/github-runner/github-runner/mypy/tests/lib/baidu/_out/test_baidu_aigc/test_baidu_aigc/doc/config/cookie/baidu 下未找到 cookie\n\nmypy/lib/baidu/baidu_aigc.py:158: Exception","steps":[],"attachments":[{"uid":"faa06f382cdc8267","name":"log","source":"faa06f382cdc8267.txt","type":"text/plain","size":209}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_output_dir::0","time":{"start":1724422185105,"stop":1724422185105,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir::finish_callback","time":{"start":1724422185106,"stop":1724422185106,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"lib.baidu"},{"name":"suite","value":"test_baidu_aigc"},{"name":"host","value":"fv-az1016-466"},{"name":"thread","value":"8923-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.baidu.test_baidu_aigc"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"aigc_type","value":"'doc'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"62face44d6fa399f.json","parameterValues":["'doc'"]}