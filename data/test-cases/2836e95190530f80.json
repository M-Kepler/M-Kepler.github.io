{"uid":"2836e95190530f80","name":"test_download_artifact","fullName":"lib.github.test_action#test_download_artifact","historyId":"d6dd37be81abd543aed7fa614edd2045","time":{"start":1729601781038,"stop":1729601781226,"duration":188},"description":"\n    测试下载工件\n    ","descriptionHtml":"<pre><code>测试下载工件\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: 'dict' object has no attribute 'content'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/github/_out/test_action'\n\n    def test_download_artifact(test_output_dir):\n        \"\"\"\n        测试下载工件\n        \"\"\"\n        artifact_id = _get_one_artifacts()\n        if not artifact_id:\n            return\n    \n        download_file = os.path.join(\n            test_output_dir, curr_func_name(),\n            f'artifact_{artifact_id}.zip')\n        FileUtil.makedir(download_file)\n>       api.download_artifact(artifact_id, download_file)\n\nmypy/tests/lib/github/test_action.py:76: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/github/action.py:90: in download_artifact\n    self._http_helper.do_download(url, download_file)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.utils.http.HTTPUtil object at 0x7fb875ee62e0>\nurl = 'https://api.github.com/repos/wordsworth-mk/github-runner/actions/artifacts/1521366179/zip'\nfile_name = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/github/_out/test_action/test_download_artifact/artifact_1521366179.zip'\n\n    def do_download(self, url, file_name):\n        \"\"\"\n        下载文件\n        \"\"\"\n        response = self.do_get(url)\n        with open(file_name, \"wb\") as file:\n>           file.write(response.content)\nE           AttributeError: 'dict' object has no attribute 'content'\n\nmypy/utils/http.py:75: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1729597033245,"stop":1729597033245,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1729601780396,"stop":1729601780398,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1729601781037,"stop":1729601781038,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    测试下载工件\n    ","status":"broken","statusMessage":"AttributeError: 'dict' object has no attribute 'content'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/github/_out/test_action'\n\n    def test_download_artifact(test_output_dir):\n        \"\"\"\n        测试下载工件\n        \"\"\"\n        artifact_id = _get_one_artifacts()\n        if not artifact_id:\n            return\n    \n        download_file = os.path.join(\n            test_output_dir, curr_func_name(),\n            f'artifact_{artifact_id}.zip')\n        FileUtil.makedir(download_file)\n>       api.download_artifact(artifact_id, download_file)\n\nmypy/tests/lib/github/test_action.py:76: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/github/action.py:90: in download_artifact\n    self._http_helper.do_download(url, download_file)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.utils.http.HTTPUtil object at 0x7fb875ee62e0>\nurl = 'https://api.github.com/repos/wordsworth-mk/github-runner/actions/artifacts/1521366179/zip'\nfile_name = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/github/_out/test_action/test_download_artifact/artifact_1521366179.zip'\n\n    def do_download(self, url, file_name):\n        \"\"\"\n        下载文件\n        \"\"\"\n        response = self.do_get(url)\n        with open(file_name, \"wb\") as file:\n>           file.write(response.content)\nE           AttributeError: 'dict' object has no attribute 'content'\n\nmypy/utils/http.py:75: AttributeError","steps":[],"attachments":[{"uid":"a7778dd7bc7bfccd","name":"log","source":"a7778dd7bc7bfccd.txt","type":"text/plain","size":753}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_output_dir::0","time":{"start":1729601781235,"stop":1729601781236,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir::finish_callback","time":{"start":1729601781236,"stop":1729601781237,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"lib.github"},{"name":"suite","value":"test_action"},{"name":"host","value":"fv-az1391-672"},{"name":"thread","value":"9859-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.github.test_action"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2836e95190530f80.json","parameterValues":[]}