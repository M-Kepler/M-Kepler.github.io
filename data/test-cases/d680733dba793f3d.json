{"uid":"d680733dba793f3d","name":"test_baidu_aigc_ppt","fullName":"lib.baidu.test_baidu_aigc_ppt#test_baidu_aigc_ppt","historyId":"be101c04b8a1b09ca9a5a615953b03f4","time":{"start":1713493797024,"stop":1713493902351,"duration":105327},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'split'","statusTrace":"def test_baidu_aigc_ppt():\n        api = BaiduAigcPPT(work_path=curr_dir)\n>       api.handle(topic_cnt=2, run_mod=RUNMOD_AUTO)\n\nmypy/tests/lib/baidu/test_baidu_aigc_ppt.py:9: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/baidu/baidu_aigc_ppt.py:70: in handle\n    asyncio.run(self.async_handle(topic_cnt=topic_cnt, run_mod=run_mod))\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/base_events.py:616: in run_until_complete\n    return future.result()\nmypy/lib/baidu/baidu_aigc_ppt.py:44: in async_handle\n    topics = self.gen_ppt_topic(topic_cnt)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.baidu.baidu_aigc_ppt.BaiduAigcPPT object at 0x7fb57dd43730>\ntopic_cnt = 2\n\n    def gen_ppt_topic(self, topic_cnt=2) -> List[str]:\n        \"\"\"\n        用 AI 生成 PPT 题目\n        \"\"\"\n        api = LLMHelper()\n        prompts = [\n            f'''https://zhuanlan.zhihu.com/p/144192472?utm_id=0\n            参考这个链接提到的科室，给出 {topic_cnt} 个护理相关的PPT主题，比如 肿瘤科护士长年终总结\n            每行一个主题，并且不需要对输出内容进行编号，用最近见得方式回答，不用过多的话术''',\n            '我说了，不需要序号']\n>       return api.chat(user_asks=prompts).split('\\n')\nE       AttributeError: 'NoneType' object has no attribute 'split'\n\nmypy/lib/baidu/baidu_aigc_ppt.py:31: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1713491339643,"stop":1713491339643,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'split'","statusTrace":"def test_baidu_aigc_ppt():\n        api = BaiduAigcPPT(work_path=curr_dir)\n>       api.handle(topic_cnt=2, run_mod=RUNMOD_AUTO)\n\nmypy/tests/lib/baidu/test_baidu_aigc_ppt.py:9: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/baidu/baidu_aigc_ppt.py:70: in handle\n    asyncio.run(self.async_handle(topic_cnt=topic_cnt, run_mod=run_mod))\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/base_events.py:616: in run_until_complete\n    return future.result()\nmypy/lib/baidu/baidu_aigc_ppt.py:44: in async_handle\n    topics = self.gen_ppt_topic(topic_cnt)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.baidu.baidu_aigc_ppt.BaiduAigcPPT object at 0x7fb57dd43730>\ntopic_cnt = 2\n\n    def gen_ppt_topic(self, topic_cnt=2) -> List[str]:\n        \"\"\"\n        用 AI 生成 PPT 题目\n        \"\"\"\n        api = LLMHelper()\n        prompts = [\n            f'''https://zhuanlan.zhihu.com/p/144192472?utm_id=0\n            参考这个链接提到的科室，给出 {topic_cnt} 个护理相关的PPT主题，比如 肿瘤科护士长年终总结\n            每行一个主题，并且不需要对输出内容进行编号，用最近见得方式回答，不用过多的话术''',\n            '我说了，不需要序号']\n>       return api.chat(user_asks=prompts).split('\\n')\nE       AttributeError: 'NoneType' object has no attribute 'split'\n\nmypy/lib/baidu/baidu_aigc_ppt.py:31: AttributeError","steps":[],"attachments":[{"uid":"434cb61c77ae6bdc","name":"log","source":"434cb61c77ae6bdc.txt","type":"text/plain","size":2602}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"lib.baidu"},{"name":"suite","value":"test_baidu_aigc_ppt"},{"name":"host","value":"fv-az799-397"},{"name":"thread","value":"7152-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.baidu.test_baidu_aigc_ppt"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"d680733dba793f3d.json","parameterValues":[]}