{"uid":"5547504fac3163ef","name":"test_html_converter[zhihu_zhuanlan-https://zhuanlan.zhihu.com/p/711679452]","fullName":"lib.html.test_html_converter#test_html_converter","historyId":"38936994babecf71346dd093e7b241c3","time":{"start":1728643061119,"stop":1728643061500,"duration":381},"description":"\n    测试 html 转成 markdown 或 pdf\n    ","descriptionHtml":"<pre><code>测试 html 转成 markdown 或 pdf\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get_text'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/html/_out/test_html_converter'\nplatform = 'zhihu_zhuanlan', url = 'https://zhuanlan.zhihu.com/p/711679452'\n\n    @pytest.mark.parametrize(\n        'platform, url',\n        [\n            ('cnblogs', 'https://www.cnblogs.com/testlearn/p/15693366.html'),\n            ('csdn', 'https://blog.csdn.net/qq_40999403/article/details/140129103'),\n            ('wexin', 'https://mp.weixin.qq.com/s/I2QHEBO26nGqhGwIw281Pg'),\n            ('dingxiangyishegn_mobile', 'https://m.dxy.com/article/50056'),\n            ('dingxiangyishegn_web', 'https://dxy.com/article/50056'),\n            ('zhihu_zhuanlan', 'https://zhuanlan.zhihu.com/p/711679452')\n        ])\n    def test_html_converter(test_output_dir, platform, url):\n        \"\"\"\n        测试 html 转成 markdown 或 pdf\n        \"\"\"\n        output_dir = os.path.join(test_output_dir, curr_func_name())\n        for item in [HTMLConverter.CONVERT_TO_MD, HTMLConverter.CONVERT_TO_PDF]:\n            api = HTMLConverter(input_url=url)\n            output_file = os.path.join(\n>               output_dir, platform + f'_{api.get_post_title()}' + item)\n\nmypy/tests/lib/html/test_html_converter.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/html/html_converter.py:90: in get_post_title\n    title = self._website_handler.get_post_title(self._website_soup)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.html.web_locator.ZhihuZhuanlanLocator object at 0x7f68cf69a190>\nsoup = <!DOCTYPE html>\n<html lang=\"en\"><head><meta charset=\"utf-8\"/></head><body><div style=\"color:#535861;opacity: 0.1;displ...='{\"appName\":\"zse_ck\",\"trackJSRuntimeError\":true}' src=\"https://static.zhihu.com/zse-ck/v3.js\"></script></body></html>\n\n\n    def get_post_title(self, soup):\n>       return soup.find('h1', class_='Post-Title').get_text(strip=True)\nE       AttributeError: 'NoneType' object has no attribute 'get_text'\n\nmypy/lib/html/web_locator.py:131: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1728639928624,"stop":1728639928625,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1728643037295,"stop":1728643037297,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1728643037297,"stop":1728643037298,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1728643065271,"stop":1728643065272,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir::0","time":{"start":1728643065271,"stop":1728643065271,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"lib.html"},{"name":"suite","value":"test_html_converter"},{"name":"host","value":"fv-az2021-771"},{"name":"thread","value":"10015-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.html.test_html_converter"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"platform","value":"'zhihu_zhuanlan'"},{"name":"url","value":"'https://zhuanlan.zhihu.com/p/711679452'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"5547504fac3163ef.json","parameterValues":["'zhihu_zhuanlan'","'https://zhuanlan.zhihu.com/p/711679452'"]}