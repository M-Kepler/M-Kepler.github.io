{"uid":"e817834450e1a061","name":"test_y2douyin_once","fullName":"apps.youtu2douyin.test_youtu2douyin#test_y2douyin_once","historyId":"718ff6673dce4cc3c0c388971fa0f393","time":{"start":1714649830290,"stop":1714649912827,"duration":82537},"status":"broken","statusMessage":"Exception: 发布配置 /home/runner/work/Python/Python/mypy/tests/apps/youtu2douyin/config/config.ini 不存在","statusTrace":"@pytest.mark.app\n    @pytest.mark.douyin\n    def test_y2douyin_once():\n        # 更新 ./config/record.json 中的 videos 为较新的记录\n        # 否则相隔太久，会发现很多视频，执行会很久\n    \n        record_api = JSONConfigHelper(\n            os.path.join(curr_dir, 'config', 'record.json'))\n    \n        records = record_api.read()\n        for item in records['channels']:\n            channel = Channel(item['channel_url'])\n            # 跳过最新的那个视频\n            pass_first_video = False\n            for video_item in channel.videos:\n                if not pass_first_video:\n                    pass_first_video = True\n                    continue\n                item['videos'] = [{\n                    \"id\": video_item.video_id,\n                    \"url\": video_item.watch_url,\n                    \"title\": video_item.title,\n                    \"publish_date\": str(video_item.publish_date),\n                    \"published\": [],\n                }]\n                break\n    \n            pass_first_shorts = False\n            for video_item in channel.shorts:\n                if not pass_first_shorts:\n                    pass_first_shorts = True\n                    continue\n                item['shorts'] = [{\n                    \"id\": video_item.video_id,\n                    \"url\": video_item.watch_url,\n                    \"title\": video_item.title,\n                    \"publish_date\": str(video_item.publish_date),\n                    \"published\": [],\n                }]\n                break\n    \n        record_api.update(records)\n    \n>       main(run_mod=Config.RUN_MOD_ONCE,\n             work_path=curr_dir)\n\nmypy/tests/apps/youtu2douyin/test_youtu2douyin.py:75: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/youtu2douyin/main.py:40: in main\n    api.check_channel_upd()\nmypy/apps/youtu2douyin/channel_loop.py:269: in check_channel_upd\n    self._channel_video_handler(channel_videos=to_publish_videos,\nmypy/apps/youtu2douyin/channel_loop.py:133: in _channel_video_handler\n    publish_result = publish_handler.publish(\nmypy/lib/playwright/publish_handler.py:120: in publish\n    return asyncio.run(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/base_events.py:616: in run_until_complete\n    return future.result()\nmypy/lib/playwright/publish_handler.py:92: in async_publish\n    DouyinPublishApp(\nmypy/lib/douyin/publish_app.py:16: in __init__\n    super().__init__(work_path=work_path,\nmypy/lib/playwright/publish_app.py:36: in __init__\n    self._ini_cfg_obj = PublishIniConfigHelper(work_path)\nmypy/lib/playwright/publish_config.py:87: in __init__\n    self._publish_cfg_obj = self._init_publish_cfg_obj()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.playwright.publish_config.PublishIniConfigHelper object at 0x7fd27b16efa0>\n\n    def _init_publish_cfg_obj(self):\n        if not os.path.exists(self._config_path):\n>           raise Exception(f'发布配置 {self._config_path} 不存在')\nE           Exception: 发布配置 /home/runner/work/Python/Python/mypy/tests/apps/youtu2douyin/config/config.ini 不存在\n\nmypy/lib/playwright/publish_config.py:91: Exception","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1714649392879,"stop":1714649392880,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"testStage":{"status":"broken","statusMessage":"Exception: 发布配置 /home/runner/work/Python/Python/mypy/tests/apps/youtu2douyin/config/config.ini 不存在","statusTrace":"@pytest.mark.app\n    @pytest.mark.douyin\n    def test_y2douyin_once():\n        # 更新 ./config/record.json 中的 videos 为较新的记录\n        # 否则相隔太久，会发现很多视频，执行会很久\n    \n        record_api = JSONConfigHelper(\n            os.path.join(curr_dir, 'config', 'record.json'))\n    \n        records = record_api.read()\n        for item in records['channels']:\n            channel = Channel(item['channel_url'])\n            # 跳过最新的那个视频\n            pass_first_video = False\n            for video_item in channel.videos:\n                if not pass_first_video:\n                    pass_first_video = True\n                    continue\n                item['videos'] = [{\n                    \"id\": video_item.video_id,\n                    \"url\": video_item.watch_url,\n                    \"title\": video_item.title,\n                    \"publish_date\": str(video_item.publish_date),\n                    \"published\": [],\n                }]\n                break\n    \n            pass_first_shorts = False\n            for video_item in channel.shorts:\n                if not pass_first_shorts:\n                    pass_first_shorts = True\n                    continue\n                item['shorts'] = [{\n                    \"id\": video_item.video_id,\n                    \"url\": video_item.watch_url,\n                    \"title\": video_item.title,\n                    \"publish_date\": str(video_item.publish_date),\n                    \"published\": [],\n                }]\n                break\n    \n        record_api.update(records)\n    \n>       main(run_mod=Config.RUN_MOD_ONCE,\n             work_path=curr_dir)\n\nmypy/tests/apps/youtu2douyin/test_youtu2douyin.py:75: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/apps/youtu2douyin/main.py:40: in main\n    api.check_channel_upd()\nmypy/apps/youtu2douyin/channel_loop.py:269: in check_channel_upd\n    self._channel_video_handler(channel_videos=to_publish_videos,\nmypy/apps/youtu2douyin/channel_loop.py:133: in _channel_video_handler\n    publish_result = publish_handler.publish(\nmypy/lib/playwright/publish_handler.py:120: in publish\n    return asyncio.run(\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/runners.py:44: in run\n    return loop.run_until_complete(main)\n/opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/asyncio/base_events.py:616: in run_until_complete\n    return future.result()\nmypy/lib/playwright/publish_handler.py:92: in async_publish\n    DouyinPublishApp(\nmypy/lib/douyin/publish_app.py:16: in __init__\n    super().__init__(work_path=work_path,\nmypy/lib/playwright/publish_app.py:36: in __init__\n    self._ini_cfg_obj = PublishIniConfigHelper(work_path)\nmypy/lib/playwright/publish_config.py:87: in __init__\n    self._publish_cfg_obj = self._init_publish_cfg_obj()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.lib.playwright.publish_config.PublishIniConfigHelper object at 0x7fd27b16efa0>\n\n    def _init_publish_cfg_obj(self):\n        if not os.path.exists(self._config_path):\n>           raise Exception(f'发布配置 {self._config_path} 不存在')\nE           Exception: 发布配置 /home/runner/work/Python/Python/mypy/tests/apps/youtu2douyin/config/config.ini 不存在\n\nmypy/lib/playwright/publish_config.py:91: Exception","steps":[],"attachments":[{"uid":"96de1602d73c953f","name":"log","source":"96de1602d73c953f.txt","type":"text/plain","size":3279}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true},"afterStages":[],"labels":[{"name":"tag","value":"douyin"},{"name":"tag","value":"app"},{"name":"parentSuite","value":"apps.youtu2douyin"},{"name":"suite","value":"test_youtu2douyin"},{"name":"host","value":"fv-az1758-722"},{"name":"thread","value":"6405-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"apps.youtu2douyin.test_youtu2douyin"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["app","douyin"]},"source":"e817834450e1a061.json","parameterValues":[]}