{"uid":"fd6ed8b6b4d7c718","name":"test_y2_video_handler","fullName":"lib.youtube.test_y2_handler#test_y2_video_handler","historyId":"2669b1c49b1922f099545f7769406d8e","time":{"start":1728644532926,"stop":1728644533183,"duration":257},"description":"\n    测试 ytdlp 下载视频，并且合并音视频和字幕\n    ","descriptionHtml":"<pre><code>测试 ytdlp 下载视频，并且合并音视频和字幕\n</code></pre>\n","status":"broken","statusMessage":"AttributeError: module 'translators' has no attribute 'translators_pool'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_handler'\n\n    def test_y2_video_handler(test_output_dir):\n        \"\"\"\n        测试 ytdlp 下载视频，并且合并音视频和字幕\n        \"\"\"\n        url = 'https://www.youtube.com/watch?v=fVcKBox97P0'\n>       y2_api = Y2VideoHandler(video_url=url,\n                                output_dir=test_output_dir,\n                                log_output=ffmpeg_log_output)\n\nmypy/tests/lib/youtube/test_y2_handler.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/youtube/y2_handler.py:44: in __init__\n    self.title_cn = translate_string(self._video.title)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\noriginal_str = 'History vs. Egypt’s \"most powerful\" pharaoh - Jessica Tomkins'\ndef_translator = 'google', to_language = 'zh-CHS'\n\n    def translate_string(original_str, def_translator='google',\n                         to_language: Optional[List[Literal['zh-CHS', 'en']]] = 'zh-CHS'):\n        \"\"\"\n        文本翻译，可以重试多个翻译引擎\n        TIPS: 用 sougu 翻译引擎的话，如果输入的是中文，会默认转成英文\n        \"\"\"\n        # 网络不好的话，导入这个库会出错\n        import translators  # pylint: disable=C0415\n    \n        def do_translate(translator=def_translator):\n            try:\n                return translators.translate_text(query_text=original_str,\n                                                  translator=translator,\n                                                  to_language=to_language)\n            except Exception:\n                return None\n    \n        # 先试一下 def_translator，不行再轮询尝试其他服务\n        result = do_translate()\n        if result:\n            return result\n    \n>       for translator in translators.translators_pool:\nE       AttributeError: module 'translators' has no attribute 'translators_pool'\n\nmypy/utils/tools.py:63: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1728639928624,"stop":1728639928625,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1728644532923,"stop":1728644532925,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1728644532925,"stop":1728644532925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n    测试 ytdlp 下载视频，并且合并音视频和字幕\n    ","status":"broken","statusMessage":"AttributeError: module 'translators' has no attribute 'translators_pool'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_handler'\n\n    def test_y2_video_handler(test_output_dir):\n        \"\"\"\n        测试 ytdlp 下载视频，并且合并音视频和字幕\n        \"\"\"\n        url = 'https://www.youtube.com/watch?v=fVcKBox97P0'\n>       y2_api = Y2VideoHandler(video_url=url,\n                                output_dir=test_output_dir,\n                                log_output=ffmpeg_log_output)\n\nmypy/tests/lib/youtube/test_y2_handler.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/youtube/y2_handler.py:44: in __init__\n    self.title_cn = translate_string(self._video.title)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\noriginal_str = 'History vs. Egypt’s \"most powerful\" pharaoh - Jessica Tomkins'\ndef_translator = 'google', to_language = 'zh-CHS'\n\n    def translate_string(original_str, def_translator='google',\n                         to_language: Optional[List[Literal['zh-CHS', 'en']]] = 'zh-CHS'):\n        \"\"\"\n        文本翻译，可以重试多个翻译引擎\n        TIPS: 用 sougu 翻译引擎的话，如果输入的是中文，会默认转成英文\n        \"\"\"\n        # 网络不好的话，导入这个库会出错\n        import translators  # pylint: disable=C0415\n    \n        def do_translate(translator=def_translator):\n            try:\n                return translators.translate_text(query_text=original_str,\n                                                  translator=translator,\n                                                  to_language=to_language)\n            except Exception:\n                return None\n    \n        # 先试一下 def_translator，不行再轮询尝试其他服务\n        result = do_translate()\n        if result:\n            return result\n    \n>       for translator in translators.translators_pool:\nE       AttributeError: module 'translators' has no attribute 'translators_pool'\n\nmypy/utils/tools.py:63: AttributeError","steps":[],"attachments":[{"uid":"6e660ad747e77192","name":"log","source":"6e660ad747e77192.txt","type":"text/plain","size":162}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1728644534529,"stop":1728644534530,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir::0","time":{"start":1728644534531,"stop":1728644534531,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"youtube"},{"name":"parentSuite","value":"lib.youtube"},{"name":"suite","value":"test_y2_handler"},{"name":"host","value":"fv-az2021-771"},{"name":"thread","value":"10015-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.youtube.test_y2_handler"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["youtube"]},"source":"fd6ed8b6b4d7c718.json","parameterValues":[]}