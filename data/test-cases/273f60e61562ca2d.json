{"uid":"273f60e61562ca2d","name":"test_speedup_add_bgm","fullName":"lib.video.test_ffmpeg_pro#test_speedup_add_bgm","historyId":"84fd3c298027cefeda270b3b844d81ad","time":{"start":1715521725935,"stop":1715521726059,"duration":124},"status":"broken","statusMessage":"ffmpeg._run.Error: ffprobe error (see stderr output for detail)","statusTrace":"test_output_dir = '/home/runner/work/Python/Python/mypy/tests/lib/video/_out/test_ffmpeg_pro'\n\n    def test_speedup_add_bgm(test_output_dir):\n        output_video = os.path.join(\n            test_output_dir, curr_func_name() + '.mp4')\n        api = FFmpegProHelper(input_video=Assets.ppt_original_video)\n        speed_to = 37  # 加速到多少秒\n        v_speeduped, a_speeduped = api.speedup(speed_to)\n>       a_mixed = api.add_bgm(input_bgm=input_bgm,\n                              replace_audio=True,\n                              video_duration=speed_to,\n                              audio_stream=a_speeduped)\n\nmypy/tests/lib/video/test_ffmpeg_pro.py:89: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/lib/video/ffmpeg_pro.py:163: in add_bgm\n    ffmpeg.probe(input_bgm)['streams'][0]['duration'])\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nfilename = '/home/runner/work/Python/Python/mypy/assets/media/ppt_bgm.mp3'\ncmd = 'ffprobe', kwargs = {}\nargs = ['ffprobe', '-show_format', '-show_streams', '-of', 'json', '/home/runner/work/Python/Python/mypy/assets/media/ppt_bgm.mp3']\np = <Popen: returncode: 1 args: ['ffprobe', '-show_format', '-show_streams', '-o...>\nout = b'{\\n\\n}\\n'\nerr = b'ffprobe version 4.4.2-0ubuntu0.22.04.1 Copyright (c) 2007-2021 the FFmpeg developers\\n  built with gcc 11 (Ubuntu 11...   55.  9.100 / 55.  9.100\\n/home/runner/work/Python/Python/mypy/assets/media/ppt_bgm.mp3: No such file or directory\\n'\n\n    def probe(filename, cmd='ffprobe', **kwargs):\n        \"\"\"Run ffprobe on the specified file and return a JSON representation of the output.\n    \n        Raises:\n            :class:`ffmpeg.Error`: if ffprobe returns a non-zero exit code,\n                an :class:`Error` is returned with a generic error message.\n                The stderr output can be retrieved by accessing the\n                ``stderr`` property of the exception.\n        \"\"\"\n        args = [cmd, '-show_format', '-show_streams', '-of', 'json']\n        args += convert_kwargs_to_cmd_line_args(kwargs)\n        args += [filename]\n    \n        p = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n        out, err = p.communicate()\n        if p.returncode != 0:\n>           raise Error('ffprobe', out, err)\nE           ffmpeg._run.Error: ffprobe error (see stderr output for detail)\n\n/opt/hostedtoolcache/Python/3.9.19/x64/lib/python3.9/site-packages/ffmpeg/_probe.py:23: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1715519457720,"stop":1715519457720,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1715521668490,"stop":1715521668492,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1715521668492,"stop":1715521668492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"test_output_dir::0","time":{"start":1715522015988,"stop":1715522015988,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir::finish_callback","time":{"start":1715522015988,"stop":1715522015989,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"video"},{"name":"parentSuite","value":"lib.video"},{"name":"suite","value":"test_ffmpeg_pro"},{"name":"host","value":"fv-az926-195"},{"name":"thread","value":"6423-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.video.test_ffmpeg_pro"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["video"]},"source":"273f60e61562ca2d.json","parameterValues":[]}