{"uid":"a4d7110ce27b7ec2","name":"test_y2_downloader[playlist]","fullName":"lib.youtube.test_y2_downloader#test_y2_downloader","historyId":"6d7fa3345eed4c86b232d2e46d10649c","time":{"start":1716738457575,"stop":1716738483979,"duration":26404},"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS' -> '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader'\nurl = 'https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'\n\n    @pytest.mark.parametrize(\"url\", [\n        \"https://www.youtube.com/watch?v=A8WVGxXHUuU\",\n        \"https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS\",\n        \"https://www.youtube.com/channel/UC4cw8Y12uIvrh8eLwGA3n8A\"],\n        ids=['video', 'playlist', 'channel'])\n    def test_y2_downloader(test_output_dir, url):\n        api = Y2DownloadTool(work_path=test_output_dir, url=url)\n>       api.do_download()\n\nmypy/tests/lib/youtube/test_y2_downloader.py:13: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/tools/y2_downloader.py:115: in do_download\n    return self.download_coll(coll_handler)\nmypy/tools/y2_downloader.py:109: in download_coll\n    self._rename(old_playlist_dir, new_playlist_dir)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.tools.y2_downloader.Y2DownloadTool object at 0x7ff41524ee20>\nold_path = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'\nnew_path = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'\n\n    def _rename(self, old_path, new_path):\n        \"\"\"\n        因为把视频的 title 用作 new_path 了\n        需要去掉其中的特殊字符后才能作为文件名，否则无法重命名\n        \"\"\"\n        safe_basename = FileUtil.safe_filename(os.path.basename(new_path))\n        new_safe_filepath = os.path.join(\n            os.path.dirname(new_path), safe_basename)\n    \n        i = 1\n        while True:\n            if os.path.exists(new_safe_filepath):\n                new_safe_filepath += f'_({i})'\n            break\n>       os.rename(old_path, new_safe_filepath)\nE       FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS' -> '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'\n\nmypy/tools/y2_downloader.py:42: FileNotFoundError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1716730415892,"stop":1716730415893,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"copy_config_to_dir","time":{"start":1716738443475,"stop":1716738443477,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir","time":{"start":1716738443477,"stop":1716738443477,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS' -> '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'","statusTrace":"test_output_dir = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader'\nurl = 'https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'\n\n    @pytest.mark.parametrize(\"url\", [\n        \"https://www.youtube.com/watch?v=A8WVGxXHUuU\",\n        \"https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS\",\n        \"https://www.youtube.com/channel/UC4cw8Y12uIvrh8eLwGA3n8A\"],\n        ids=['video', 'playlist', 'channel'])\n    def test_y2_downloader(test_output_dir, url):\n        api = Y2DownloadTool(work_path=test_output_dir, url=url)\n>       api.do_download()\n\nmypy/tests/lib/youtube/test_y2_downloader.py:13: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmypy/tools/y2_downloader.py:115: in do_download\n    return self.download_coll(coll_handler)\nmypy/tools/y2_downloader.py:109: in download_coll\n    self._rename(old_playlist_dir, new_playlist_dir)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mypy.tools.y2_downloader.Y2DownloadTool object at 0x7ff41524ee20>\nold_path = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'\nnew_path = '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'\n\n    def _rename(self, old_path, new_path):\n        \"\"\"\n        因为把视频的 title 用作 new_path 了\n        需要去掉其中的特殊字符后才能作为文件名，否则无法重命名\n        \"\"\"\n        safe_basename = FileUtil.safe_filename(os.path.basename(new_path))\n        new_safe_filepath = os.path.join(\n            os.path.dirname(new_path), safe_basename)\n    \n        i = 1\n        while True:\n            if os.path.exists(new_safe_filepath):\n                new_safe_filepath += f'_({i})'\n            break\n>       os.rename(old_path, new_safe_filepath)\nE       FileNotFoundError: [Errno 2] No such file or directory: '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/channel_PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS' -> '/home/runner/work/github-runner/github-runner/mypy/tests/lib/youtube/_out/test_y2_downloader/_out/WWII / 二戰'\n\nmypy/tools/y2_downloader.py:42: FileNotFoundError","steps":[],"attachments":[{"uid":"8d2a82c364a41838","name":"log","source":"8d2a82c364a41838.txt","type":"text/plain","size":4340}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"copy_config_to_dir::finish_callback","time":{"start":1716739084881,"stop":1716739084882,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_output_dir::0","time":{"start":1716739084881,"stop":1716739084881,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"lib.youtube"},{"name":"suite","value":"test_y2_downloader"},{"name":"host","value":"fv-az1153-958"},{"name":"thread","value":"6737-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.youtube.test_y2_downloader"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"url","value":"'https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"a4d7110ce27b7ec2.json","parameterValues":["'https://www.youtube.com/playlist?list=PL-CDIidnoXnBqgBVbf5y9Qm4y4ZKHHYUS'"]}