{"uid":"5595daeba312b691","name":"test_logger_filename","fullName":"lib.test_log#test_logger_filename","historyId":"901cfb7a0c62ce3f02d30978a80a1834","time":{"start":1716637543187,"stop":1716637543188,"duration":1},"status":"skipped","statusMessage":"XFAIL 如果日志格式不包含文件名，则可能失败\n\nAssertionError: assert None is not None\n +  where None = <function search at 0x7fc990335f70>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\n +    where <function search at 0x7fc990335f70> = re.search\n +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out","statusTrace":"capsys = <_pytest.capture.CaptureFixture object at 0x7fc98b8d0a90>\n\n    @pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')\n    def test_logger_filename(capsys):\n        logger = get_logger(__name__)\n        test_message = \"test message for logging\"\n    \n        # 记录一条日志\n        logger.info(test_message)\n    \n        # 使用 capsys 来捕获日志输出\n        captured = capsys.readouterr()\n        print(captured)\n    \n        # 检查输出中是否包含正确的文件名\n        expected_filename = os.path.basename(__file__)\n        print(expected_filename)\n        print(captured.out)\n        # 正则匹配，确保日志中出现了当前文件的文件名\n>       assert re.search(\n            rf\"\\[{expected_filename}:\\d+\\]: .*{test_message}\", captured.out) is not None\nE       AssertionError: assert None is not None\nE        +  where None = <function search at 0x7fc990335f70>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\nE        +    where <function search at 0x7fc990335f70> = re.search\nE        +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out\n\nmypy/tests/lib/test_log.py:28: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1716627456536,"stop":1716627456536,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0},{"name":"copy_config_to_dir","time":{"start":1716637543185,"stop":1716637543186,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0},{"name":"capsys","time":{"start":1716637543186,"stop":1716637543186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0}],"testStage":{"status":"skipped","statusMessage":"XFAIL 如果日志格式不包含文件名，则可能失败\n\nAssertionError: assert None is not None\n +  where None = <function search at 0x7fc990335f70>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\n +    where <function search at 0x7fc990335f70> = re.search\n +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out","statusTrace":"capsys = <_pytest.capture.CaptureFixture object at 0x7fc98b8d0a90>\n\n    @pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')\n    def test_logger_filename(capsys):\n        logger = get_logger(__name__)\n        test_message = \"test message for logging\"\n    \n        # 记录一条日志\n        logger.info(test_message)\n    \n        # 使用 capsys 来捕获日志输出\n        captured = capsys.readouterr()\n        print(captured)\n    \n        # 检查输出中是否包含正确的文件名\n        expected_filename = os.path.basename(__file__)\n        print(expected_filename)\n        print(captured.out)\n        # 正则匹配，确保日志中出现了当前文件的文件名\n>       assert re.search(\n            rf\"\\[{expected_filename}:\\d+\\]: .*{test_message}\", captured.out) is not None\nE       AssertionError: assert None is not None\nE        +  where None = <function search at 0x7fc990335f70>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\nE        +    where <function search at 0x7fc990335f70> = re.search\nE        +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out\n\nmypy/tests/lib/test_log.py:28: AssertionError","steps":[],"attachments":[{"uid":"3f7c171ffea2321","name":"log","source":"3f7c171ffea2321.txt","type":"text/plain","size":62}],"parameters":[],"attachmentsCount":1,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":0},"afterStages":[{"name":"capsys::0","time":{"start":1716637543193,"stop":1716637543193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0},{"name":"copy_config_to_dir::finish_callback","time":{"start":1716637543258,"stop":1716637543258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')"},{"name":"tag","value":"lib"},{"name":"parentSuite","value":"lib"},{"name":"suite","value":"test_log"},{"name":"host","value":"fv-az585-661"},{"name":"thread","value":"6665-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.test_log"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["@pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')","lib"]},"source":"5595daeba312b691.json","parameterValues":[]}