{"uid":"853795bf3b246760","name":"test_logger_filename","fullName":"lib.test_log#test_logger_filename","historyId":"901cfb7a0c62ce3f02d30978a80a1834","time":{"start":1714718915118,"stop":1714718915119,"duration":1},"status":"skipped","statusMessage":"XFAIL 如果日志格式不包含文件名，则可能失败\n\nAssertionError: assert None is not None\n +  where None = <function search at 0x7f60ab3db8b0>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\n +    where <function search at 0x7f60ab3db8b0> = re.search\n +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out","statusTrace":"capsys = <_pytest.capture.CaptureFixture object at 0x7f609014d820>\n\n    @pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')\n    def test_logger_filename(capsys):\n        logger = get_logger(__name__)\n        test_message = \"test message for logging\"\n    \n        # 记录一条日志\n        logger.info(test_message)\n    \n        # 使用 capsys 来捕获日志输出\n        captured = capsys.readouterr()\n        print(captured)\n    \n        # 检查输出中是否包含正确的文件名\n        expected_filename = os.path.basename(__file__)\n        print(expected_filename)\n        print(captured.out)\n        # 正则匹配，确保日志中出现了当前文件的文件名\n>       assert re.search(\n            rf\"\\[{expected_filename}:\\d+\\]: .*{test_message}\", captured.out) is not None\nE       AssertionError: assert None is not None\nE        +  where None = <function search at 0x7f60ab3db8b0>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\nE        +    where <function search at 0x7f60ab3db8b0> = re.search\nE        +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out\n\nmypy/tests/lib/test_log.py:30: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1714717237980,"stop":1714717237980,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"copy_config_to_dir","time":{"start":1714718915116,"stop":1714718915117,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"capsys","time":{"start":1714718915117,"stop":1714718915117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL 如果日志格式不包含文件名，则可能失败\n\nAssertionError: assert None is not None\n +  where None = <function search at 0x7f60ab3db8b0>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\n +    where <function search at 0x7f60ab3db8b0> = re.search\n +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out","statusTrace":"capsys = <_pytest.capture.CaptureFixture object at 0x7f609014d820>\n\n    @pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')\n    def test_logger_filename(capsys):\n        logger = get_logger(__name__)\n        test_message = \"test message for logging\"\n    \n        # 记录一条日志\n        logger.info(test_message)\n    \n        # 使用 capsys 来捕获日志输出\n        captured = capsys.readouterr()\n        print(captured)\n    \n        # 检查输出中是否包含正确的文件名\n        expected_filename = os.path.basename(__file__)\n        print(expected_filename)\n        print(captured.out)\n        # 正则匹配，确保日志中出现了当前文件的文件名\n>       assert re.search(\n            rf\"\\[{expected_filename}:\\d+\\]: .*{test_message}\", captured.out) is not None\nE       AssertionError: assert None is not None\nE        +  where None = <function search at 0x7f60ab3db8b0>('\\\\[test_log.py:\\\\d+\\\\]: .*test message for logging', '\uD83D\uDFE2 test message for logging\\n')\nE        +    where <function search at 0x7f60ab3db8b0> = re.search\nE        +    and   '\uD83D\uDFE2 test message for logging\\n' = CaptureResult(out='\uD83D\uDFE2 test message for logging\\n', err='').out\n\nmypy/tests/lib/test_log.py:30: AssertionError","steps":[],"attachments":[{"uid":"da1c975828456f3","name":"log","source":"da1c975828456f3.txt","type":"text/plain","size":62}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true},"afterStages":[{"name":"capsys::0","time":{"start":1714718915124,"stop":1714718915124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"copy_config_to_dir::finish_callback","time":{"start":1714718915210,"stop":1714718915210,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')"},{"name":"tag","value":"lib"},{"name":"parentSuite","value":"lib"},{"name":"suite","value":"test_log"},{"name":"host","value":"fv-az1188-510"},{"name":"thread","value":"6382-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"lib.test_log"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["@pytest.mark.xfail(reason='如果日志格式不包含文件名，则可能失败')","lib"]},"source":"853795bf3b246760.json","parameterValues":[]}