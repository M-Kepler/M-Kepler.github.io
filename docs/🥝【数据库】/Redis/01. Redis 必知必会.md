- [参考资料](#参考资料)
- [`Redis`](#redis)
  - [★ 性能优化](#-性能优化)
  - [事务](#事务)
    - [`Redis` 事务机制是什么样的](#redis-事务机制是什么样的)
- [其他](#其他)

# 参考资料

- [Python 进阶内容整理](https://www.jianshu.com/p/43d58b0ccd8b)

- [Redis 详解](https://www.cnblogs.com/ysocean/tag/Redis%E8%AF%A6%E8%A7%A3)

- [帅地 - Redis 面试题](https://www.iamshuaidi.com/1864.html)

- [两种常见的缓存淘汰算法 LFU&LRU](https://blog.csdn.net/jake_li/article/details/50659868)

- [Redis 高级（主从，哨兵，集群）](https://www.jianshu.com/p/ab9aaae8b7e8)

- [万字 + 图解 Redis](https://mp.weixin.qq.com/s/Vk97FXNuWYdMjyysiIFBAA)

- [Redis 以及分不是集群](https://blog.csdn.net/u011514729/article/details/79781388)

- [Redis 主从复制详解](https://blog.csdn.net/qqq3117004957/article/details/104787087)

- [★ 一文把 Redis 主从复制、哨兵、cluster 三种模式摸透](https://mp.weixin.qq.com/s/2weAtBfuu5Qlyvqx8h9zNw)

- [★ Redis 从入门到精通：Redis 的数据结构、Redis 指令大全、SpringBoot 整合 Redis、Redis 面试问题详解](https://blog.csdn.net/qq_36095679/article/details/92086031)

- [《我想进大厂》之 Redis 夺命连环 11 问](https://zhuanlan.zhihu.com/p/347132294)

- [内存耗尽后 Redis 会发生什么](https://zhuanlan.zhihu.com/p/351731947)

- [Redis 缓存和 MySQL 数据一致性方案详解](https://zhuanlan.zhihu.com/p/58536781)

- [缓存（本地缓存、分布式缓存）与数据库之间的数据一致性问题](https://www.pianshen.com/article/4037822761/)

- [Redis 缓存与数据库一致性问题解决](https://blog.csdn.net/u013521220/article/details/108190792)

- [谈谈 Redis 的热 key 问题如何解决](https://zhuanlan.zhihu.com/p/65959998)

- [说说 Redis 基本数据类型有哪些吧](https://www.cnblogs.com/ilovejaney/p/13798500.html)

- [2020 年最新版 68 道 Redis 面试题，20000 字干货，赶紧收藏起来备用！](https://mp.weixin.qq.com/s/HvyTtA0BlTAjgFVFGZ-JvA)

- [新浪、阿里、腾讯常问的七道 Redis 面试题分享（含个人解答）](https://www.jianshu.com/p/1dd86b808059)

- [Redis 面试题汇总（附答案），面试突击专用](https://cloud.tencent.com/developer/article/1758371)

- [Redis 高频面试题（来自字节跳动，腾讯，百度题目总结）](https://blog.csdn.net/asd051377305/article/details/107962592)

- [Redis 面试题（2020 最新版）](https://blog.csdn.net/ThinkWon/article/details/103522351)

- [Redis 为什么变慢了？一文讲透如何排查 Redis 性能问题 | 万字长文](https://cloud.tencent.com/developer/article/1442600)

- [Redis 主从复制看这篇就够了](http://blog.itpub.net/31545684/viewspace-2213629/)

# `Redis`

## ★ 性能优化

[[性能优化必知必会]]

## 事务

### `Redis` 事务机制是什么样的

`Redis` 通过 `MULTI、EXEC、WATCH` 等命令来实现事务机制，事务执行过程将一系列多个命令按照顺序一次性执行，并且在执行期间，事务不会被中断，也不会去执行客户端的其他请求，直到所有命令执行完毕

```sql
-- DISCARD    取消事务，放弃执行事务块内的所有命令
-- EXEC       执行事务块内的所有命令
-- MULTI      标记一个事务块的开始
-- UNWATCH    取消 watch 命令对所有 key 的监控
-- WATCH      监控一个或多个 key，如果在事务执行之前，key 被其他命令改动，那么事务将被打断

127.0.0.1:6379> MULTI  -- 开启事务
OK
127.0.0.1:6379> set k1 v1
QUEUED
127.0.0.1:6379> set k2 v2
QUEUED
127.0.0.1:6379> get k2
QUEUED
127.0.0.1:6379> set k3 v3
QUEUED
127.0.0.1:6379> EXEC  -- 执行事务
1) OK
2) OK
3) "v2"
4) OK
127.0.0.1:6379>
```

- 事务的执行过程如下

  - 服务端收到客户端请求，事务以 `MULTI` 开始

  - 如果客户端正处于事务状态，则会`把事务放入队列同时返回给客户端 QUEUED`，反之则直接执行这个命令

  - 当收到客户端 `EXEC` 命令时，`WATCH` 命令监视整个事务中的 `key` 是否有被修改，如果有则返回空回复到客户端表示失败，否则 `Redis` 会遍历整个事务队列，执行队列中保存的所有命令，最后返回结果给客户端

  - `WATCH` 的机制本身是一个 `CAS` 的机制，被监视的 `key` 会被保存到一个链表中，如果某个 `key` 被修改，那么 `REDIS_DIRTY_CAS` 标志将会被打开，这时服务器会拒绝执行事务

# 其他
