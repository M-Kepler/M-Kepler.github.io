- [微服务 - API 网关](#微服务---api-网关)
- [APISIX](#apisix)
  - [架构](#架构)
- [参考资料](#参考资料)

# 微服务 - API 网关

一个网关需要有以下的功能:

- 请求路由

  网关一定要有请求路由的功能。这样一来，对于调用端来说，也是一件非常方便的事情。因为调用端不需要知道自己需要用到的其它服务的地址，全部统一地交给 Gateway 来处理。

- 服务注册

  为了能够代理后面的服务，并把请求路由到正确的位置上，网关应该有服务注册功能，也就是后端的服务实例可以把其提供服务的地址注册、取消注册。一般来说，注册也就是注册一些 API 接口。比如，HTTP 的 Restful 请求，可以注册相应 API 的 URI、方法、HTTP 头。这样，Gateway 就可以根据接收到的请求中的信息来决定路由到哪一个后端的服务上。

- 负载均衡

  因为一个网关可以接收多个服务实例，所以网关还需要在各个对等的服务实例上做负载均衡策略。简单点就是直接 Round-Robin 轮询，复杂点的可以设置上权重进行分发，再复杂一点还可以做到 session 粘连。

- 弹力设计

  网关还可以把弹力设计中的那些异步、重试、幂等、流控、熔断、监视等都可以实现进去。这样，同样可以像 Service Mesh 那样，让应用服务只关心自己的业务逻辑（或是说数据面上的事）而不是控制逻辑（控制面）。

- 安全方面

# APISIX

APISIX 是基于 OpenResty + etcd 实现的云原生、高性能、可扩展的微服务 API 网关。

可以实现用户的验证登录、解决跨域、日志拦截、权限控制、限流、熔断、负载均衡、黑名单与白名单机制等。

## 架构

![alt](https://img2022.cnblogs.com/blog/1337382/202204/1337382-20220413224803900-1302529134.png)

# 参考资料

- [官网](https://github.com/apache/apisix)

- [微服务网关 APISIX](https://cloud.tencent.com/developer/article/1630196)

- [⭐ API 网关选型总结](https://mp.weixin.qq.com/s/YvLpx9ObV2PMGFTREhSitA)
