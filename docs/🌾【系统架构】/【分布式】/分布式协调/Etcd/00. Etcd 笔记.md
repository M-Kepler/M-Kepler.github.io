- [参考资料](#参考资料)
- [ETCD](#etcd)
  - [安装](#安装)
  - [配置](#配置)
  - [使用](#使用)
- [架构](#架构)
- [学习过程中的疑问](#学习过程中的疑问)
- [排障指南](#排障指南)
- [其他](#其他)

# 参考资料

- [ETCD 官方文档中文版](https://doczhcn.gitbook.io/etcd/index)

- [ETCD 介绍 - etcd 概念及原理方面分析](https://blog.csdn.net/Linuxhus/article/details/120043751)

- [为什么用 ETCD 而不用 ZOOKEEPER](https://mp.weixin.qq.com/s/bgbwupe7OGQMW9tZpkDyuQ)

- [微服务：注册中心 ZooKeeper、Eureka、Consul 、Nacos 对比](https://blog.csdn.net/fly910905/article/details/100023415)

# ETCD

`etcd` = `etc`（配置） + `daemon`（服务）

分布式系统中的数据分为控制数据和应用数据。etcd 的使用场景默认处理的数据都是控制数据，对于应用数据，只推荐数据量很小，但是更新访问频繁的情况。

应用场景有如下几类：

- 场景一：服务发现（Service Discovery）

- 场景二：消息发布与订阅

- 场景三：负载均衡

- 场景四：分布式通知与协调

- 场景五：分布式锁、分布式队列

- 场景六：集群监控与 Leader 竞选

举个最简单的例子，如果你需要一个分布式存储仓库来存储配置信息，并且希望这个仓库读写速度快、支持高可用、部署简单、支持 http 接口，那么就可以使用 etcd。

目前，`cloudfoundry` 使用 etcd 作为 hm9000 的应用状态信息存储，`kubernetes` 用 etcd 来存储 docker 集群的配置信息等。

- [ ] 概念：高可用的分布式 key-value 存储，可以用户配置共享和服务发现

- [ ] 类似项目：zookeeper 和 consul

- [ ] 开发语言：Go

- [ ] 接口：提供 restful 的 http 接口，使用简单

- [ ] 实现算法：基于 raft 算法的强一致性，高可用的服务存储目录

## 安装

```sh
$yum install etcd
```

## 配置

- 设置环境变量 `export ETCDCTL_API=3` 使用新版本的命令

  ```log
  WARNING:
    Environment variable ETCDCTL_API is not set; defaults to etcdctl v2.
    Set environment variable ETCDCTL_API=3 to use v3 API or ETCDCTL_API=2 to use v2 API.

  ```

## 使用

- 密码

[etcd 集群权限管理和账号密码使用](https://www.jianshu.com/p/3587eaaf3c2f#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7)

# 架构

# 学习过程中的疑问

# 排障指南

- `etcdctl 报错：etcdctl No help topic for 'put'`

  ```sh
  export ETCDCTL_API=3
  ```

# 其他
