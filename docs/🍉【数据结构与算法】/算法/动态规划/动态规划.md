- [动态规划](#动态规划)
  - [问题特点](#问题特点)
  - [算法思想](#算法思想)
    - [数学归纳法](#数学归纳法)
    - [自顶向下还是自底向上](#自顶向下还是自底向上)
    - [动态规划和递归的关系](#动态规划和递归的关系)
    - [动态规划与分治的关系](#动态规划与分治的关系)
    - [背包模型](#背包模型)
    - [滚动数组](#滚动数组)
  - [解题步骤](#解题步骤)
    - [能不能用](#能不能用)
    - [怎么用](#怎么用)
    - [如何优化](#如何优化)
  - [复杂度](#复杂度)
    - [时间复杂度](#时间复杂度)
- [二维 DP](#二维-dp)
  - [问题特点](#问题特点-1)
    - [二维 DP 如何优化成一维 DP](#二维-dp-如何优化成一维-dp)
  - [典型题](#典型题)
- [典型题](#典型题-1)
  - [简单 DP](#简单-dp)
  - [最值系列](#最值系列)
  - [股票系列](#股票系列)
  - [打家劫舍系列](#打家劫舍系列)
  - [问有多少种方法](#问有多少种方法)
- [其他](#其他)
- [参考资料](#参考资料)

# 动态规划

## 问题特点

- `最优子结构`

  > 子问题间必须相互独立

  最优解包含了其子问题的最优解，不是合并所有子问题的解，而是找最优的一条解线路，选择部分子最优解来达到最终的最优解。`可以从子问题的最优结果推出更大规模问题的最优结果`。

  比如让你算每个班的最优成绩就是子问题，你知道所有子问题的答案后，就可以借此推出全校学生的最优成绩这个规模更大的问题的答案

- `重叠子问题`

  先计算子问题的解，再由子问题的解去构造问题的解（由于子问题存在重叠，把子问题解记录下来为下一步使用，这样就直接可以从备忘录中读取），其中备忘录中先记录初始状态（备忘录、记忆化搜索，意思都是把计算过的数据记录下来，避免重复计算）。

  比如我要提升自己的技术能力，那么我要提升语言能力、数据库能力、代码设计能力、算法能力，为了提升这些能力，我要把每一项能力的所有基础知识弄懂、所有原理弄懂，又为了弄懂所有基础知识，我需要知道它有哪些基础知识 ... 反正意思就是一直迭代下去，如果我做好了每一件小事，那么我将达成提升技术能力这一总目标；而且这些小事之间都是相互独立的。

## 算法思想

动态规划感觉和高中时学的 `数学归纳法` 很像，也是求 `f(n)` 的解依赖于 `f(n-1)` 的解，而且也是先计算 `f(0)` 的情况

- `数学归纳法`

  ```
  1.（归纳奠基） 证明当 `n = 0` 时命题成立
  2.（归纳递推） 假设 `n = k` 时命题成立
  3. 证明当 `n = k + 1` 时，命题也成立
  ```

- `步骤`

  - 抓住边界（作为递归推出条件）

  - 找到状态转移方程（即 f(n)与 f(n-1)的关系）

  - 写出递归函数，适当做出优化

- `状态转移方程`

  - `状态`：即原问题与子问题中**变化的变量**

  - `基础状态`：说白了就是递归退出的状态，就是除了这写特殊状态以外，都满足状态转移方程。

  - `转移方程`：即可以总结成一个数学函数公式

### 数学归纳法

- 就是放鞭炮，连锁反应

- 假设 `n = k` 时，某结论成立，把这个假设的结论当成条件再去证明出 `n = k + 1` 时，这个结论仍然成立；那我们就得到了局部任意连续两项的一个可递推可证明的关系，`注意是任意相邻两项`

- 此时你还差一个什么？鞭炮都摆好了，就差点燃第一根了，所以只要计算出 `n = 1` 时满足该假设结论，那么就能 1 推 2，2 推 3，持续下去，`相当于我们用简单的两步证明给自己创造了一个可以无限递推自证的程序`

- 不过大家都讲这叫多米诺骨牌，你能让第一张倒下去，并且能保证`相邻`两张前一张倒下来后面就会倒，那么就所有的都会倒

### 自顶向下还是自底向上

**自顶向下**

- 以斐波那契数列为例：我要计算 `fab(20)` 那么按照 `自顶向下` 的知道思想，就应该是 `fab(20) = fab(20 - 1) + fab(20 - 2)`，然后不断继续下去

**自底向上**

- 以斐波那契数列为例，我要计算 `fab(20)`，我不需要直接计算这个值，我只要从 `fab(0)` 开始，一直向前推进就行了，等我推进到 `fab(20)` 结果自然就出来了。

**自顶向下还是自低向下**

- 看情况吧，两种都行。自顶向下的话，要注意把计算过的结果缓存起来（就像 `python` 里的记忆化装饰器）；自底向上也是，把计算结果放到 `dp` 数组里。

### 动态规划和递归的关系

- `记忆化搜索`

  以 `斐波那契数列` 这个经典的递归模型来讲

  ![alt](https://www.zhihu.com/equation?tex=f%28n%29+%3D+%5Cbegin%7Bcases%7D1+%26+%28n+%3D+0%29+%5C%5C+1+%26+%28n+%3D+1%29+%5C%5C+f%28n-1%29+%2B+f%28n-2%29+%26+%28n+%3E+2%29+%5Cend%7Bcases%7D%5C%5C)

  $$
  f(n) = \begin{cases}
  1                 \quad &(n = 0) \\
  1                 \quad &(n = 1) \\
  f(n-1) + f(n-2)   \quad &(n > 2)
  \end{cases}
  $$

  ```cpp
  f(5) = f(4) + [f(3)];
  f(4) = [f(3)] + f(2);
  f(3) = f(2) + f(1);
  f(2) = f(1) + f(0);
  ```

  计算 `f(5)` 的时候需要计算一次 `f(3)`，计算 `f(4)` 的时候也要计算一次 `f(3)`；这种重复的操作可以通过【记忆化搜索】来解决

  记忆化搜索，即计算过程中把结果缓存起来，如果发现已经计算过了，就直接取值就行了

- `动态规划 ≈ 递归 + 记忆化搜索`

  简单说，动态规划就是数学归纳法，可以由前面的结果推算出后面的结果 `f(n + 1) = do_something(n + 1, f(n));`

  任何动态规划问题，本质上都是可以采用记忆化搜索的，因为它们都是用哈希数组来记录子问题，并且避免重复运算，所以动态规划能够存储的状态，记忆化搜索同样可以存储，空间复杂度是一样的。

  部分动态规划问题，比如背包问题，是可以采用`滚动数组`进行空间优化的，空间优化和记忆化自然是不能共存的。

### 动态规划与分治的关系

动态规划划分的子问题是有重叠的，解过程中对于重叠的部分只要求解一次，`记录下结果`，其他子问题直接使用即可，减少了重复计算过程。

另外，动态规划在求解一个问题最优解的时候，`不是固定的计算合并某些子问题的解，而是根据各子问题的解的情况选择其中最优的`

### 背包模型

[[背包问题]]

### 滚动数组

[《滚动数组》- 动态规划思想](https://www.cnblogs.com/RioTian/p/12397821.html)

滚动数组是 DP 中的一种编程思想。`简单的理解就是让数组滚动起来，每次都使用固定的几个存储空间，来达到压缩，节省存储空间的作用`。

起到优化空间，主要应用在递推或动态规划中（如 01 背包问题）。因为 DP 题目是一个自底向上的扩展过程，我们常常需要用到的是连续的解，前面的解往往可以舍去。所以用滚动数组优化是很有效的。利用滚动数组的话在 N 很大的情况下可以达到压缩存储的作用。

## 解题步骤

### 能不能用

> 符不符合 `数学归纳法` 的特征

- 有没有已知基本条件

- 后面的值可不可以根据前面已知的值求出来

### 怎么用

> - 明确「状态」 --> 定义 dp 数组/函数的含义 --> 明确「选择」 --> 明确基本条件
> - 解决动态规划问题就是找「状态」和「选择」，仅此而已。

```cpp
/**
 * 【动态规划步骤】
 *
 *   【有哪些变量】 也就是原问题和⼦问题中变化的变量
 *                 DP 数组是几维和有多少个状态有关
 *
 *    TODO
 *
 *   【dp 数组的意义】 dp 数组表示什么
 *
 *    TODO
 *
 *   【变量如何变化】
 *
 *    TODO
 *
 *   【确定「选择」并择优】每个状态/遍历可以做出
 *                       什么选择改变当前状态
 *
 *    TODO
 *
 *   【基本案例】即变量在初始状态时的 dp 数组的样子
 *
 *    TODO
 *
 *   【状态转移方程】 一般是 for 循环来遍历变量的所有可能
 *
 *    TODO
 */
```

### 如何优化

- `消除重叠子问题`

  如果发现有些值重复计算，可以通过把计算结果记录到 dp 表的方法进行优化，就像缓存一样

- `优化成一维 DP`

  有些问题虽然有两个变量，但是某个维度的值都是固定的，或者可知的，就没必要用二维数组了

- `滚动数组`

## 复杂度

### 时间复杂度

动态规划算法的时间复杂度就是子问题个数 `乘以` 函数本身的复杂度

# 二维 DP

## 问题特点

- 如果发现题目中有两个变量，那大概率是要准备一个二维 dp 数组了

- 涉及`两个字符串/数组`、`矩阵` 的子序列，比如`最长公共子序列`

- 分析是否可以使用动态规划解决的时候，发现有`两个变量`

### 二维 DP 如何优化成一维 DP

## 典型题

# 典型题

[力扣上的 DP 问题分类汇总](https://leetcode-cn.com/circle/article/NfHhXD/)

## 简单 DP

> 一维 DP 更像是在找规律

- `斐波那契`、`杨辉三角` 就很像这个动态规划自顶向下的实现

- [338. 比特位计数](https://leetcode.cn/problems/counting-bits/description)

- [★ 509. 斐波那契数](https://leetcode-cn.com/problems/fibonacci-number/description/) 把动态规划、记忆化搜索、自底向上、自顶向下都包括了

## 最值系列

- [300. 最长上升子序列](https://leetcode-cn.com/problems/longest-increasing-subsequence/description/)

- [674. 最长连续递增序列](https://leetcode-cn.com/problems/longest-continuous-increasing-subsequence/description/)

- [416. 分割等和子集](https://leetcode-cn.com/problems/partition-equal-subset-sum/description/)

- [718. 最长重复子数组](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/description/)

- [1143. 最长公共子序列](https://leetcode-cn.com/problems/longest-common-subsequence/description/)

- [516. 最长回文子序列](https://leetcode-cn.com/problems/longest-palindromic-subsequence/description/)

- [5. 最长回文子串](https://leetcode-cn.com/problems/longest-palindromic-substring/description)

- [72. 编辑距离](https://leetcode-cn.com/problems/edit-distance/description/)

---

- [53. 最大子序和](https://leetcode-cn.com/problems/maximum-subarray/description/)

- [14. 最长公共前缀](https://leetcode-cn.com/problems/longest-common-prefix/description/)

- [409. 最长回文串](https://leetcode-cn.com/problems/longest-palindrome/description/)

- [152. 乘积最大子数组](https://leetcode-cn.com/problems/maximum-product-subarray/description/)

## 股票系列

[股票问题总结](https://blog.csdn.net/weixin_43959833/article/details/121110796)

- [121. 买卖股票的最佳时机](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/description)

- [122. 买卖股票的最佳时机 II](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/description)

- [123. 买卖股票的最佳时机 III](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/description)

- [188. 买卖股票的最佳时机 IV](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/description)

## 打家劫舍系列

- [198. 打家劫舍](https://leetcode-cn.com/problems/house-robber/description/)

- [213. 打家劫舍 II](https://leetcode-cn.com/problems/house-robber-ii/)

## 问有多少种方法

- [70. 爬楼梯](https://leetcode-cn.com/problems/climbing-stairs/description/)

- [887. 鸡蛋掉落](https://leetcode-cn.com/problems/super-egg-drop/description/)

- [1884. 鸡蛋掉落-两枚鸡蛋](https://leetcode-cn.com/problems/egg-drop-with-2-eggs-and-n-floors/description/)

- [62. 不同路径](https://leetcode-cn.com/problems/unique-paths/description/)

# 其他

[[贪心算法]]

# 参考资料

- [看一遍就理解：动态规划详解](https://mp.weixin.qq.com/s/G9drq9e-HMAbWKXqG1i4gg)

- [动态规划之武林秘籍](https://mp.weixin.qq.com/s/CXLM0KC3eYYl6u2NsCpW4g)

- [动态规划算法入门篇](https://mp.weixin.qq.com/s/CXehOg-i8HnDqtv6-9q7jA)

- [动态规划入门看这篇就够了，万字长文](https://mp.weixin.qq.com/s?__biz=MzI2NjI5MzU2Nw==&mid=2247484633&idx=1&sn=c2b3ecd346ce8d84fbbddb85e5391686&scene=21)

- [★ 力扣上的 DP 问题分类汇总](https://leetcode-cn.com/circle/article/NfHhXD/)

- [什么是动态规划？动态规划的意义是什么？ - 阮行止的回答 - 知乎](https://www.zhihu.com/question/23995189/answer/613096905)

- [labuladong 动态规划详解（修订版）](https://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&mid=2247484731&idx=1&sn=f1db6dee2c8e70c42240aead9fd224e6&chksm=9bd7fb33aca07225bee0b23a911c30295e0b90f393af75eca377caa4598ffb203549e1768336&token=1077645212&lang=zh_CN&scene=142#wechat_redirect)
