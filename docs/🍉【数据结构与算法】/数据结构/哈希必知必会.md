- [参考资料](#参考资料)
- [哈希](#哈希)
  - [什么是哈希表](#什么是哈希表)
  - [哈希表有什么作用](#哈希表有什么作用)
  - [常见哈希方法](#常见哈希方法)
  - [哈希冲突](#哈希冲突)
- [哈希必知必会](#哈希必知必会)
  - [什么时候用](#什么时候用)
  - [怎么用](#怎么用)
  - [技巧](#技巧)
    - [用数组模拟哈希表](#用数组模拟哈希表)
  - [题型](#题型)
    - [用哈希表来标记或计数（词频）](#用哈希表来标记或计数词频)
    - [字符串之间的关系](#字符串之间的关系)
    - [通过词频判断是否是子串](#通过词频判断是否是子串)

# 参考资料

- [哈希表不过如此](https://mp.weixin.qq.com/s/-b2v9fVlvd_YVUzkoVSoDw)

- [做哈希表相关题目，你得了解这些](https://mp.weixin.qq.com/s?__biz=MzUxNjY5NTYxNA==&mid=2247489134&idx=2&sn=a0b218da8ffd81a7fe0d3ec6a52e00c9&scene=21#wechat_redirect)

- [巧用 hash 表高效解决数据比对](https://mp.weixin.qq.com/s?__biz=MzI4NDMyNzA4NQ==&idx=1&mid=2247483816&sn=9c60561b82c016ed8be741260bc5b157)

# 哈希

- 数组的特点: 查找容易, 插入删除困难

- 链表特点: 查找困难, 插入删除容易

- 哈希等值查询很快 O(1)，但是一说到为什么索引、zset 不采用哈希，必有 **无法有序查询**、**不适合范围查询** 两个原因

## 什么是哈希表

- 哈希表（也叫散列表），是根据关键码值(Key value)而直接进行访问的数据结构。

- 它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度; 这个映射函数叫做散列函数，存放记录的数组叫做散列表。 `string --> key = hash(string)`

## 哈希表有什么作用

- `安全领域`

  如 md5、sha1 等消息摘要算法, 用来判断文件完整

- `查找`

  拿到 string 的 key 值后, 就能知道该 string 存储在哪了

- `词频问题`

- `Top-k 问题`

## 常见哈希方法

- `直接定址法`

  取关键字或关键字的某个线性函数值为散列地址，这个线性函数的定义多种多样，没有标准。

- `数字分析法`

  假设关键字是以 r 为基的数，并且哈希表中可能出现的关键字都是事先知道的，则可取关键字的若干数位组成哈希地址

- `平方取中法`

  取关键字平方后的中间几位为哈希地址。通常在选定哈希函数时不一定能知道关键字的全部情况，取其中的哪几位也不一定合适，而一个数平方后的中间几位数和数的每一位都相关，由此使随机分布的关键字得到的哈希地址也是随机的，取的位数由表长决定

- `折叠法`

  将关键字分割成位数相同的几部分（最后一部分的位数可以不同），然后取这几部分的叠加和（舍去进位）作为哈希地址

- `取模法`

  取关键字被某个不大于散列表表长 m 的数 p 除后所得的余数为散列地址。即 hash(key) = key % p（p<= M），不仅可以对关键字直接取模，也可在折叠法、平方取中法等运算之后取模。对 p 的选择很重要，一般取素数或 m，若 p 选择不好，容易产生冲突

## 哈希冲突

不同的内容经过同一个散列函数后得到的 key 值可能是相同的, 这样叫发生冲突(碰撞)

**`开放寻址法`**

- 这种方法适用于`存储数据不是特别多`的情况

- 如果发现数组下标为 `hash(string)` 中已有值了, 就往右找(或者同时往左找)第一个没值的位置存放

**`再次散列法`**

- 这种方法不易产生聚集，但`增加了计算时间`

- 同时构造多个不同的哈希函数： `Hi=RH1（key） i=1，2，…，k`，当哈希地址 `Hi=RH1（key）` 发生冲突时，再计算 `Hi=RH2（key）……`，直到冲突不再产生

**`拉链法`**

- 对于哈希结果相同的数据, 则以键为链表头结点, 往后拉出一条链表, 所有键相同的数据都插入到链表中

  ![alt](https://img-blog.csdn.net/20160319112006551)

**`缓冲区`**

把有冲突的数据都放到缓冲区, 如果在哈希表查不到就去缓冲区找

# 哈希必知必会

## 什么时候用

> value 不一定是整数啊，别自己绕进去了

- 需要对元素进行 `【统计】` 以便后序访问的情况，比如 [169. 多数元素](https://leetcode-cn.com/problems/majority-element/description/)

- 判断两个字符串的字符是否满足某种关系的题目，比如 [242. 有效的字母异位词](https://leetcode-cn.com/problems/valid-anagram/description/)、[205. 同构字符串](https://leetcode-cn.com/problems/isomorphic-strings/description/)

## 怎么用

- 哈希的键要求唯一。

## 技巧

### 用数组模拟哈希表

用数组干啥，都用 map 完事了；在某些情况下，使用 map 的空间消耗要比数组大一些的，因为 map 要维护红黑树或者哈希表，而且还要做哈希函数。所以数组更加简单直接有效

- `元素数量有限的时候`，比如说这个字符串`【只包含小写字母】`这种

  比如 `nums = [1, 2, 1000000000, 1]`，如果用数组模拟哈希，求里面的重复元素，`那么数组就要开辟非常大的空间`（这也是位图的缺点），然后把元素作为下标，值为出现的次数，即 `helper[1000000000] += 1`

- **`1 <= a[i] <= n （n为数组长度）`** 这种最好了，不用考虑数组会很长的问题

## 题型

### 用哈希表来标记或计数（词频）

> 比如判断是否【重复】

- [169. 多数元素](https://leetcode-cn.com/problems/majority-element/description/)

- [442. 数组中重复的数据](https://leetcode-cn.com/problems/find-all-duplicates-in-an-array/description)

- [面试题 01.02. 判定是否互为字符重排](https://leetcode.cn/problems/check-permutation-lcci/)

- [217. 存在重复元素](https://leetcode-cn.com/problems/contains-duplicate/description/)

- [347. 前 K 个高频元素](https://leetcode-cn.com/problems/top-k-frequent-elements/description/)

- [448. 找到所有数组中消失的数字](https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/description/)

- [202. 快乐数](https://leetcode-cn.com/problems/happy-number/description/)

### 字符串之间的关系

- [242. 有效的字母异位词](https://leetcode-cn.com/problems/valid-anagram/description/)

- [205. 同构字符串](https://leetcode-cn.com/problems/isomorphic-strings/description/)

- [383. 赎金信](https://leetcode-cn.com/problems/ransom-note/description)

- [★ 138. 复制带随机指针的链表](https://leetcode-cn.com/problems/copy-list-with-random-pointer/description/)

### 通过词频判断是否是子串

- [★ 567. 字符串的排列](https://leetcode-cn.com/problems/permutation-in-string/description/)
